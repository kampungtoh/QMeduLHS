<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç—…äººè­˜åˆ¥å®‰å…¨å­¸ç¿’æ¨¡çµ„</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Microsoft JhengHei', sans-serif;
            background: linear-gradient(135deg, #0f4c75 0%, #1a73e8 100%); /* èª¿æ•´ç‚ºæ›´æ²‰ç©©çš„è—è‰² */
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            background: rgba(255, 255, 255, 0.98); /* ç•¥å¾®èª¿é«˜é€æ˜åº¦ */
            backdrop-filter: blur(8px);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.25);
            max-width: 900px;
            width: 100%;
            padding: 40px;
            animation: slideIn 0.6s ease-out;
            position: relative;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 3px solid #0f4c75;
        }

        h1 {
            color: #0f4c75;
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 800; /* åŠ å¼·æ¨™é¡Œç²—ç´° */
        }

        .subtitle {
            color: #4a4a4a; /* èª¿æ•´é¡è‰² */
            font-size: 1.2em;
            font-weight: 500;
        }

        .start-screen {
            text-align: center;
            padding: 40px;
        }

        .reference-link {
            margin-top: 20px;
            font-size: 0.95em;
            color: #666;
        }

        .reference-link a {
            color: #1a73e8; /* é€£çµé¡è‰² */
            text-decoration: none;
            font-weight: 600;
            transition: color 0.3s ease;
        }

        .reference-link a:hover {
            color: #0f4c75;
            text-decoration: underline;
        }

        .introduction-section {
            display: none;
            padding: 30px;
            text-align: left;
            animation: fadeIn 0.5s ease-out;
        }

        .introduction-section h2 {
            color: #0f4c75;
            font-size: 2em;
            margin-bottom: 20px;
            text-align: center;
            border-bottom: 2px dashed #a0c4ff;
            padding-bottom: 10px;
        }

        .intro-content {
            background: linear-gradient(135deg, #f0f7ff 0%, #dbe8ff 100%); /* æ·¡é›…è—è‰²èƒŒæ™¯ */
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 25px;
            border-left: 5px solid #1a73e8; /* å°ˆæ¥­è—è‰²é‚Šæ¢ */
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .intro-content h3 {
            color: #0f4c75;
            margin-bottom: 15px;
            font-size: 1.4em;
            border-bottom: 1px solid #c0d8f7;
            padding-bottom: 5px;
        }

        .intro-content p, .intro-content li {
            line-height: 1.8;
            color: #333;
            font-size: 1.05em;
            margin-bottom: 10px;
        }

        .intro-content ul {
            margin-left: 25px;
            margin-top: 10px;
            list-style-type: 'ğŸ‘‰ '; /* è‡ªå®šç¾©åˆ—è¡¨ç¬¦è™Ÿ */
        }

        .intro-content li {
            padding-left: 5px;
        }

        /* ç§»é™¤ä¸ç›¸é—œçš„ BiPAP æ¨£å¼ */
        .bipap-diagram, .device-image, .indicator-list {
            display: none;
        }

        .warning-section {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            text-align: left;
        }

        .warning-section h4 {
            color: #856404;
            margin-bottom: 15px;
            font-size: 1.3em;
            text-align: center;
            font-weight: 700;
        }

        .warning-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); /* éŸ¿æ‡‰å¼ç¶²æ ¼ */
            gap: 15px;
            margin-top: 15px;
        }

        .warning-box {
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            border: 1px solid #ffeeba;
        }

        .warning-box h5 {
            color: #dc3545;
            margin-bottom: 10px;
            font-size: 1.1em;
            font-weight: 600;
        }

        .warning-box ul {
            margin-left: 20px;
            font-size: 0.95em;
            color: #495057;
            list-style-type: disc;
        }

        .warning-box li {
            margin: 5px 0;
            line-height: 1.5;
        }

        .start-button, .continue-button {
            background: linear-gradient(135deg, #1a73e8 0%, #0f4c75 100%); /* å°ˆæ¥­è—è‰²æ¼¸è®Š */
            color: white;
            border: none;
            padding: 18px 50px;
            font-size: 1.2em;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            letter-spacing: 1px;
            box-shadow: 0 10px 20px rgba(26, 115, 232, 0.3);
            margin-top: 20px;
        }

        .start-button:hover, .continue-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(26, 115, 232, 0.4);
        }

        /* æ¸¬é©—å€å¡Šæ¨£å¼æ²¿ç”¨ */

        .key-point {
            background: #e6f7ff; /* æ·ºè—è‰²é‡é» */
            border-left: 4px solid #1890ff;
            padding: 15px;
            margin: 15px 0;
            border-radius: 8px;
            font-weight: 600;
            color: #004d40;
            font-size: 1.1em;
            text-align: center;
        }

        .footer-credit {
            position: absolute;
            bottom: -50px;
            left: 0;
            right: 0;
            text-align: center;
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9em;
            padding: 10px;
        }

        /* æ²¿ç”¨æˆ–å¾®èª¿åŸæœ‰çš„å•ç­”å€å¡Šæ¨£å¼ */
        .question-container {
            display: none;
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .progress-bar {
            background: #e0e0e0;
            height: 12px;
            border-radius: 20px;
            margin-bottom: 30px;
            overflow: hidden;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .progress {
            background: linear-gradient(90deg, #1a73e8 0%, #0f4c75 100%);
            height: 100%;
            border-radius: 20px;
            transition: width 0.5s ease;
            box-shadow: 0 2px 4px rgba(26, 115, 232, 0.3);
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            color: #333;
        }

        .question-number {
            font-size: 1.2em;
            font-weight: 700;
            color: #1a73e8;
        }

        .score {
            font-size: 1.2em;
            font-weight: 700;
            color: #0f4c75;
        }

        .scenario {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 25px;
            border-left: 5px solid #1a73e8;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .scenario h3 {
            color: #0f4c75;
            margin-bottom: 15px;
            font-size: 1.4em;
        }

        .scenario p {
            line-height: 1.8;
            color: #444;
            font-size: 1.05em;
        }

        .options {
            margin-top: 25px;
        }

        .option {
            background: white;
            border: 2px solid #e0e0e0;
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            font-size: 1.1em;
            line-height: 1.6;
        }

        .option:hover {
            border-color: #1a73e8;
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(26, 115, 232, 0.2);
        }

        .option.selected {
            border-color: #1a73e8;
            background: linear-gradient(135deg, #e0efff 0%, #d1e2ff 100%);
        }

        .option.correct {
            border-color: #28a745;
            background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
            animation: correctPulse 0.6s ease;
        }

        .option.incorrect {
            border-color: #dc3545;
            background: linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%);
            animation: shake 0.5s ease;
        }

        .feedback {
            margin-top: 20px;
            padding: 20px;
            border-radius: 12px;
            display: none;
            animation: slideDown 0.5s ease;
            font-size: 1.05em;
            line-height: 1.7;
        }

        .feedback.correct {
            background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
            border: 2px solid #28a745;
            color: #155724;
        }

        .feedback.incorrect {
            background: linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%);
            border: 2px solid #dc3545;
            color: #721c24;
        }

        .next-button {
            background: linear-gradient(135deg, #1a73e8 0%, #0f4c75 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.1em;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 20px auto 0;
            font-weight: 600;
            display: none;
            box-shadow: 0 8px 15px rgba(26, 115, 232, 0.3);
        }

        .next-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 20px rgba(26, 115, 232, 0.4);
        }

        .results {
            display: none;
            text-align: center;
            padding: 40px;
            animation: fadeIn 0.5s ease-out;
        }

        .results h2 {
            color: #0f4c75;
            margin-bottom: 20px;
            font-size: 2.5em;
        }

        .final-score {
            font-size: 4em; /* æ”¾å¤§åˆ†æ•¸ */
            color: #1a73e8;
            margin: 20px 0;
            font-weight: 800;
            animation: bounce 1s ease;
        }

        .performance-message {
            font-size: 1.4em;
            color: #333;
            margin-bottom: 30px;
            font-weight: 500;
        }

        /* éŸ¿æ‡‰å¼èª¿æ•´ */
        @media (max-width: 600px) {
            .container {
                padding: 20px;
                margin-bottom: 60px;
            }
            
            h1 {
                font-size: 2em;
            }
            
            .scenario {
                padding: 15px;
            }
            
            .option {
                padding: 15px;
                font-size: 1em;
            }

            .warning-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ›¡ï¸ ç—…äººè­˜åˆ¥å®‰å…¨å­¸ç¿’æ¨¡çµ„</h1>
            <p class="subtitle">IPSGç›®æ¨™ä¸€ï¼šæ­£ç¢ºè­˜åˆ¥ç—…äººè‡¨åºŠæƒ…å¢ƒè¨“ç·´</p>
        </div>

        <div class="start-screen" id="startScreen">
            <h2>æ­¡è¿ä½¿ç”¨ç—…äººè­˜åˆ¥å®‰å…¨èª²ç¨‹</h2>
            <p style="margin: 20px 0; font-size: 1.1em; color: #4a4a4a;">
                æœ¬èª²ç¨‹æ—¨åœ¨æå‡é†«äº‹äººå“¡åœ¨å„é …ç…§è­·ç’°ç¯€ä¸­**æ­£ç¢ºè­˜åˆ¥ç—…äºº**çš„èªçŸ¥èˆ‡åŸ·è¡Œèƒ½åŠ›ã€‚<br>é€™æ˜¯ JCIã€é†«å­¸ä¸­å¿ƒè©•é‘‘èˆ‡é†«å“ç—…å®‰çš„é¦–è¦ç›®æ¨™ã€‚
            </p>
            <div class="key-point">
                <strong>æ ¸å¿ƒåŸå‰‡ï¼š</strong>åœ¨åŸ·è¡Œä»»ä½•ç…§è­·è¡Œç‚ºå‰ï¼Œæ‡‰ä»¥**å…©ç¨®ä»¥ä¸Š**çš„è­˜åˆ¥æ–¹å¼æ ¸å°ç—…äººèº«ä»½ã€‚
            </div>
            <div class="reference-link">
                å­¸ç¿’å…§å®¹åƒè€ƒï¼š<a href="#" onclick="return false;">JCI IPSG.01.01.01</a>ã€é†«é™¢é†«å“ç—…å®‰ä¹å¤§ç›®æ¨™
            </div>
            <button class="start-button" onclick="showIntroduction()">é–‹å§‹å­¸ç¿’</button>
            <div id="completionCount" style="margin-top:10px; font-weight:bold; color:#333;">
                <span id="completionMessageCount"></span>
            </div>
        </div>

        <div class="introduction-section" id="introductionSection">
            <h2>ğŸš¨ æ­£ç¢ºè­˜åˆ¥ç—…äººçš„é‡è¦æ€§</h2>
            
            <div class="intro-content">
                <h3>ç‚ºä»€éº¼è¦æ­£ç¢ºè­˜åˆ¥ç—…äººï¼Ÿ</h3>
                <p>éŒ¯èª¤çš„ç—…äººè­˜åˆ¥å¯èƒ½å°è‡´åš´é‡å¾Œæœï¼ŒåŒ…æ‹¬ï¼š</p>
                <ul>
                    <li><strong>æ²»ç™‚éŒ¯èª¤ï¼š</strong>æ‰‹è¡“ã€è—¥ç‰©ã€è¼¸è¡€ç­‰å°éŒ¯ç—…äººã€‚</li>
                    <li><strong>è¨ºæ–·éŒ¯èª¤ï¼š</strong>æª¢é«”æ¨™ç¤ºéŒ¯èª¤å°è‡´æª¢é©—çµæœæ··æ·†ã€‚</li>
                    <li><strong>æ­»äº¡æˆ–åš´é‡å‚·å®³ï¼š</strong>åœ‹éš›é–“å·²æœ‰å¤šèµ·å› è­˜åˆ¥éŒ¯èª¤å°è‡´ç—…äººæ­»äº¡çš„æ¡ˆä¾‹ã€‚</li>
                </ul>
                <p style="font-weight: 600; color: #d32f2f;">â­ IPSG åœ‹éš›ç—…äººå®‰å…¨ç›®æ¨™ä¸€ï¼šç¢ºä¿åœ¨æä¾›ç…§è­·æœå‹™æ™‚ï¼Œæ­£ç¢ºè­˜åˆ¥ç—…äººã€‚</p>
            </div>

            <div class="intro-content">
                <h3>èª°éœ€è¦è¢«è­˜åˆ¥ï¼Ÿä»€éº¼æ™‚å€™éœ€è¦è­˜åˆ¥ï¼Ÿ</h3>
                <ul>
                    <li><strong>è­˜åˆ¥å°è±¡ï¼š</strong>æ‰€æœ‰ä½é™¢ã€é–€è¨ºã€æ€¥è¨ºã€æ¥å—æª¢æŸ¥å’Œæ²»ç™‚çš„ç—…äººã€‚</li>
                    <li><strong>å¿…é ˆè­˜åˆ¥çš„æ™‚æ©Ÿï¼š</strong>
                        <ul style="list-style-type: circle; margin-top: 5px;">
                            <li>ğŸ’‰ <strong>çµ¦è—¥</strong>ï¼ˆåŒ…æ‹¬å£æœã€é‡åŠ‘ã€è¼¸æ¶²ï¼‰å‰ã€‚</li>
                            <li>ğŸ©¸ <strong>è¼¸è¡€</strong>æˆ–è¡€å“ã€æˆ–æº–å‚™è¼¸è¡€æ™‚ã€‚</li>
                            <li>ğŸ”¬ <strong>æ¡é›†æª¢é«”</strong>æˆ–æº–å‚™æª¢é«”æ™‚ï¼ˆå¦‚è¡€æ¶²ã€å°¿æ¶²ï¼‰ã€‚</li>
                            <li>ğŸ¥ <strong>åŸ·è¡Œæ²»ç™‚ã€æ‰‹è¡“ã€æª¢æŸ¥</strong>ã€æˆ–è™•ç½®å‰ã€‚</li>
                            <li>ğŸ”„ <strong>äº¤æ¥ç­</strong>æ™‚ã€‚</li>
                        </ul>
                    </li>
                </ul>
            </div>

            <div class="warning-section">
                <h4>âœ… é›™é‡è­˜åˆ¥æ–¹å¼ï¼ˆTwo Identifiersï¼‰</h4>
                <p style="color: #000; font-weight: 600; margin-bottom: 10px;">è«‹è‡³å°‘ä½¿ç”¨ä»¥ä¸‹å…©ç¨®è³‡è¨Šï¼Œä¸”ä¸å¯ä½¿ç”¨ç—…å®¤/åºŠä½è™Ÿç¢¼ä½œç‚ºå”¯ä¸€è­˜åˆ¥æ–¹å¼ï¼š</p>
                <div class="warning-grid">
                    <div class="warning-box">
                        <h5>å¸¸è¦‹æ­£ç¢ºè­˜åˆ¥é …ç›®</h5>
                        <ul>
                            <li><strong>å…¨å</strong> (å§“å)</li>
                            <li><strong>ç—…æ­·è™Ÿç¢¼</strong></li>
                            <li><strong>å‡ºç”Ÿå¹´æœˆæ—¥</strong> (èˆ‡ç—…äººæˆ–å®¶å±¬å£è¿°ç¢ºèª)</li>
                            <li>èº«ä»½è­‰/è­·ç…§è™Ÿç¢¼ (ä¾å„é™¢è¦å®šï¼Œå¤šç”¨æ–¼é–€è¨º)</li>
                        </ul>
                    </div>
                    <div class="warning-box">
                        <h5>ç‰¹æ®Šæƒ…æ³è­˜åˆ¥</h5>
                        <ul>
                            <li><strong>æ„è­˜ä¸æ¸…è€…ï¼š</strong>æ ¸å°æ‰‹åœˆèˆ‡é†«å›‘/ç—…æ­·ã€‚</li>
                            <li><strong>ç„¡åæ°ï¼š</strong>æ‡‰ä½¿ç”¨é™¢æ–¹è¦å®šçš„è‡¨æ™‚è­˜åˆ¥ç¢¼ï¼ˆå¦‚ã€Œ99999-ç„¡åæ°ã€ï¼‰ã€‚</li>
                            <li><strong>å¬°å…’/æ–°ç”Ÿå…’ï¼š</strong>æ ¸å°æ¯è¦ªæ‰‹åœˆã€å¬°å…’è…³åœˆèˆ‡æ¯è¦ªè³‡æ–™ã€‚</li>
                            <li><strong>éš”é›¢å€ç—…äººï¼š</strong>é™¤é›™é‡è­˜åˆ¥å¤–ï¼Œæ‡‰ç•™æ„æ‰‹åœˆé¡è‰²æˆ–æ¨™ç¤ºã€‚</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div style="text-align: center;">
                <button class="continue-button" onclick="startQuiz()">é€²å…¥è‡¨åºŠæƒ…å¢ƒæ¸¬é©—</button>
            </div>
        </div>

        <div class="question-container" id="questionContainer">
            <div class="progress-bar">
                <div class="progress" id="progressBar"></div>
            </div>
            
            <div class="question-header">
                <span class="question-number" id="questionNumber"></span>
                <span class="score" id="scoreDisplay">å¾—åˆ†: 0</span>
            </div>

            <div class="scenario" id="scenario"></div>
            
            <div class="options" id="options"></div>
            
            <div class="feedback" id="feedback"></div>
            
            <div style="text-align: center;">
                <button class="next-button" id="prevButton" onclick="prevPage()" style="background:linear-gradient(135deg,#aaa 0%,#777 100%);margin-right:10px;">ä¸Šä¸€é¡Œ</button>
                <button class="next-button" id="nextButton" onclick="nextQuestion()">ä¸‹ä¸€é¡Œ</button>
            </div>
        </div>

        <div class="results" id="results">
            <h2>ğŸ‰ å­¸ç¿’å®Œæˆï¼</h2>
            <div class="final-score" id="finalScore"></div>
            <p class="performance-message" id="performanceMessage"></p>
            
            <div class="completion-form" id="completionForm">
                <h3>è«‹è¼¸å…¥æ‚¨çš„è³‡æ–™ä»¥å®Œæˆå­¸ç¿’ç´€éŒ„</h3>
                <div class="form-group">
                    <label for="staffId">äººäº‹è™Ÿç¢¼</label>
                    <input type="text" id="staffId" placeholder="è«‹è¼¸å…¥æ‚¨çš„äººäº‹è™Ÿç¢¼" required>
                </div>
                <button class="submit-button" onclick="submitCompletion()">æäº¤å­¸ç¿’ç´€éŒ„</button>
            </div>
            
            <div class="completion-message" id="completionMessage">
                âœ… å­¸ç¿’ç´€éŒ„å·²å„²å­˜ï¼æ„Ÿè¬æ‚¨å®Œæˆç—…äººè­˜åˆ¥å®‰å…¨å­¸ç¿’èª²ç¨‹ã€‚
            </div>
            
            <button class="restart-button" onclick="restartQuiz()">é‡æ–°å­¸ç¿’</button>
        </div>

        <div class="footer-credit">
            å“è³ªç®¡ç†ä¸­å¿ƒåŠæ•™è‚²è¨“ç·´éƒ¨è£½ä½œ | <span id="lastUpdated" style="color:rgba(255,255,255,0.8); font-size:0.9em;">æœ€å¾Œæ›´æ–°æ—¥æœŸï¼š2025.10.7 (Ver 1.0)</span>
        </div>
    </div>

    <script>
        const questions = [
            {
                scenario: "è­·ç†å¸«å°ç¾æº–å‚™ç‚º12åºŠçš„ç—…äººæ³¨å°„èƒ°å³¶ç´ ã€‚å¥¹ä¾†åˆ°åºŠé‚Šï¼Œè©¢å•ç—…äººï¼šã€Œè«‹å•æ‚¨æ˜¯é™³å¿—æ˜å…ˆç”Ÿå°å—ï¼Ÿã€ã€‚ç—…äººé»é ­è¡¨ç¤ºæ˜¯ã€‚",
                question: "æ ¹æ“šæ¨™æº–çš„ç—…äººè­˜åˆ¥æµç¨‹ï¼Œå°ç¾åœ¨çµ¦è—¥å‰æ¡å–çš„è­˜åˆ¥æ–¹å¼æ˜¯å¦è¶³å¤ ï¼Ÿ",
                options: [
                    "è¶³å¤ ï¼Œå› ç‚ºç—…äººæ„è­˜æ¸…æ¥šï¼Œä¸”å£è¿°ç¢ºèªäº†å§“åã€‚",
                    "ä¸è¶³å¤ ï¼Œæ‡‰åŒæ™‚æ ¸å°ç—…äººçš„ç—…æ­·è™Ÿæˆ–å‡ºç”Ÿå¹´æœˆæ—¥ã€‚",
                    "è¶³å¤ ï¼Œå› ç‚ºåºŠè™Ÿå’Œå§“åéƒ½ç¢ºèªäº†ã€‚",
                    "ä¸è¶³å¤ ï¼Œä½†åªè¦æ ¸å°åºŠé ­å¡å’Œé†«å›‘å³å¯ã€‚"
                ],
                correct: 1,
                feedback: {
                    correct: "ğŸ‘ æ­£ç¢ºï¼åœ¨åŸ·è¡Œçµ¦è—¥ã€è¼¸è¡€ã€æ¡æª¢ç­‰é—œéµç…§è­·è¡Œç‚ºå‰ï¼Œå¿…é ˆä½¿ç”¨**è‡³å°‘å…©ç¨®è­˜åˆ¥æ–¹å¼**ï¼ˆä¾‹å¦‚ï¼šå§“å + ç—…æ­·è™Ÿ/å‡ºç”Ÿå¹´æœˆæ—¥ï¼‰ï¼Œå–®ä¸€å§“åç¢ºèªä¸è¶³ä»¥ç¢ºä¿å®‰å…¨ã€‚",
                    incorrect: "âš ï¸ ä¸æ­£ç¢ºã€‚å–®ç´”å£è¿°å§“åæˆ–æ ¸å°åºŠè™Ÿæ˜¯ä¸è¶³å¤ çš„ï¼Œé€™é•åäº†**é›™é‡è­˜åˆ¥**åŸå‰‡ï¼ˆTwo Identifiersï¼‰ã€‚æ‡‰åŠ ä¸Šæ ¸å°ç—…æ­·è™Ÿæˆ–å‡ºç”Ÿå¹´æœˆæ—¥ï¼Œä¸¦æ ¸å°æ‰‹åœˆè³‡è¨Šã€‚"
                }
            },
            {
                scenario: "å°å…’ç§‘è­·ç†å¸«å°é™³æº–å‚™ç‚ºå‰›å‡ºç”Ÿçš„é›™èƒèƒå¬°å…’æ³¨å°„ç¶­ç”Ÿç´ Kã€‚å…©ä½å¬°å…’çš„æ¯è¦ªéƒ½å«ã€ç‹ç¾ç²ã€ï¼Œç—…æˆ¿å…§å…±æœ‰ä¸‰ä½åŒåçš„å¬°å…’ã€‚å°é™³ç«™åœ¨ä¿æº«ç®±å‰ï¼Œæ„Ÿåˆ°æœ‰äº›æ··æ·†ã€‚",
                question: "åœ¨ç‚ºé€™ä½ã€ç‹ç¾ç²ã€å¬°å…’æ³¨å°„å‰ï¼Œå°é™³æœ€å®‰å…¨ä¸”æ­£ç¢ºçš„è­˜åˆ¥æµç¨‹æ˜¯ï¼Ÿ",
                options: [
                    "æ ¸å°å¬°å…’è…³åœˆä¸Šçš„ã€ç‹ç¾ç²ã€å§“åï¼Œç„¶å¾Œé€²è¡Œæ³¨å°„ã€‚",
                    "æ ¸å°å¬°å…’è…³åœˆä¸Šçš„**å§“åå’Œå‡ºç”Ÿå¹´æœˆæ—¥**ï¼Œä¸¦ç¢ºèª**æ¯è¦ªçš„æ‰‹åœˆ**è³‡è¨Šï¼Œç„¶å¾Œé€²è¡Œæ³¨å°„ã€‚",
                    "è«‹æ¯è¦ªå£è¿°å¬°å…’çš„å§“åå’Œç—…æ­·è™Ÿï¼Œç„¶å¾Œé€²è¡Œæ³¨å°„ã€‚",
                    "æ ¸å°å¬°å…’çš„åºŠè™Ÿèˆ‡é†«å›‘ï¼Œä¸¦ç¢ºèªå¬°å…’çš„æ€§åˆ¥ï¼Œç„¶å¾Œé€²è¡Œæ³¨å°„ã€‚"
                ],
                correct: 1,
                feedback: {
                    correct: "ğŸ’¯ éå¸¸å¥½ï¼æ–°ç”Ÿå…’è­˜åˆ¥å¿…é ˆåŒæ™‚æ ¸å°å¬°å…’è…³åœˆä¸Šçš„**å…©ç¨®è­˜åˆ¥ç¢¼**ï¼ˆé€šå¸¸æ˜¯å§“å+å‡ºç”Ÿå¹´æœˆæ—¥æˆ–ç—…æ­·è™Ÿï¼‰ï¼Œä¸¦ä¸”èˆ‡**æ¯è¦ªçš„æ‰‹åœˆ**é€²è¡Œäº¤å‰æ¯”å°ï¼Œä»¥ç¢ºä¿ä¸æœƒèª¤èªåŒååŒå§“çš„å¬°å…’ã€‚",
                    incorrect: "âŒ ä¸æ­£ç¢ºã€‚åŒåå¬°å…’æ˜¯ç—…äººè­˜åˆ¥éŒ¯èª¤çš„é«˜é¢¨éšªç¾¤ã€‚åƒ…æ ¸å°å§“åéå¸¸å±éšªã€‚æ­£ç¢ºåšæ³•æ˜¯æ ¸å°**å¬°å…’è…³åœˆä¸Šçš„é›™è­˜åˆ¥ç¢¼**ï¼Œä¸¦èˆ‡**æ¯è¦ªæ‰‹åœˆ**äº¤å‰ç¢ºèªã€‚"
                },
                extraInfo: `
                    <div class="intro-content">
                        <h3>ğŸ‘¶ æ–°ç”Ÿå…’/åŒåç—…äººè­˜åˆ¥ï¼šé«˜é¢¨éšªæƒ…æ³</h3>
                        <p><strong>é¢¨éšªé»ï¼š</strong>æ–°ç”Ÿå…’ç„¡æ³•è‡ªæˆ‘è¡¨é”ï¼ŒåŒååŒå§“ç—…äººå¢åŠ èª¤åˆ¤é¢¨éšªã€‚</p>
                        <p><strong>æ¨™æº–ä½œæ¥­ï¼š</strong></p>
                        <ul>
                            <li><strong>ä¸‰æ–¹æ ¸å°ï¼š</strong>ç¢ºèª**å¬°å…’è­˜åˆ¥ç’°**ã€**æ¯è¦ªè­˜åˆ¥ç’°**ã€ä»¥åŠ**é†«å›‘æˆ–ç—…æ­·**ä¸Šçš„è³‡è¨Šã€‚</li>
                            <li><strong>è­˜åˆ¥ç¢¼ï¼š</strong>ä½¿ç”¨**å§“å** + **æ¯è¦ªç—…æ­·è™Ÿ**æˆ–**å¬°å…’å‡ºç”Ÿæ—¥æœŸ**ä½œç‚ºé›™è­˜åˆ¥ç¢¼ã€‚</li>
                            <li><strong>ç‰¹åˆ¥æ³¨æ„ï¼š</strong>ä¸å¯åªä¾è³´å¤–è§€æˆ–åºŠä½é€²è¡Œè­˜åˆ¥ã€‚</li>
                        </ul>
                    </div>
                `
            },
            {
                scenario: "æ€¥è¨ºè­·ç†å¸«å°æåœ¨è™•ç†ä¸€ä½åš´é‡è»Šç¦æ˜è¿·çš„ç„¡åæ°ç—…äººã€‚æ­¤ç—…äººæ‰‹éƒ¨æ²’æœ‰ä»»ä½•è­˜åˆ¥æ‰‹ç’°ï¼Œèº«ä¸Šä¹Ÿæ²’æœ‰ä»»ä½•è­‰ä»¶ã€‚æ€¥è¨ºé†«å¸«å·²ç·Šæ€¥ä¸‹é”è¼¸è¡€é†«å›‘ã€‚",
                question: "åœ¨ç‚ºæ­¤ç—…äººæ¡è¡€åŠæº–å‚™è¼¸è¡€å‰ï¼Œå°ææ‡‰å„ªå…ˆæ¡å–çš„ç—…äººè­˜åˆ¥æ­¥é©Ÿæ˜¯ï¼Ÿ",
                options: [
                    "å…ˆæ¡è¡€é€é©—ï¼Œç­‰å®¶å±¬æˆ–è­¦æ–¹ç¢ºèªèº«ä»½å¾Œå†è£œä¸Šæ‰‹ç’°ã€‚",
                    "ä½¿ç”¨é†«é™¢è¦å®šçš„**è‡¨æ™‚è­˜åˆ¥ç¢¼**ï¼ˆä¾‹å¦‚ï¼š99999-ç„¡åæ°ï¼‰ï¼Œå¡«å¯«åœ¨æ‰‹ç’°åŠæª¢é«”æ¨™ç±¤ä¸Šï¼Œç„¶å¾Œé€²è¡Œæ¡è¡€å’Œè¼¸è¡€ç¨‹åºã€‚",
                    "å…ˆè©¢å•æ•‘è­·è»Šäººå“¡ç—…äººå§“åã€‚",
                    "æš«ç·©è¼¸è¡€ï¼Œç›´åˆ°ç—…äººæ„è­˜æ¢å¾©èƒ½å£è¿°å§“åç‚ºæ­¢ã€‚"
                ],
                correct: 1,
                feedback: {
                    correct: "âœ… æ­£ç¢ºï¼**ç„¡åæ°/èº«ä»½ä¸æ˜**çš„ç—…äººå¿…é ˆç«‹å³çµ¦äºˆ**è‡¨æ™‚è­˜åˆ¥ç¢¼**ï¼Œä¸¦è£½ä½œæ‰‹ç’°ã€‚æ‰€æœ‰è™•ç½®ï¼ˆæ¡è¡€ã€è¼¸è¡€ã€çµ¦è—¥ï¼‰éƒ½å¿…é ˆä¾æ­¤è‡¨æ™‚ç¢¼é€²è¡Œï¼Œä¸¦è¨˜éŒ„æ–¼ç—…æ­·ä¸­ã€‚",
                    incorrect: "âŒ ä¸æ­£ç¢ºã€‚åœ¨ç·Šæ€¥æƒ…æ³ä¸‹ï¼Œä¸èƒ½å»¶èª¤è¼¸è¡€ï¼Œä½†ä¹Ÿä¸èƒ½åœ¨æ²’æœ‰æ‰‹ç’°çš„æƒ…æ³ä¸‹é€²è¡Œã€‚å¿…é ˆç«‹å³ä½¿ç”¨**é†«é™¢è¦å®šçš„è‡¨æ™‚è­˜åˆ¥ç¢¼**ï¼Œä¸¦è²¼æ–¼æ‰‹ç’°å’Œæ‰€æœ‰æª¢é«”ã€è¼¸è¡€è¢‹ä¸Šï¼Œç¢ºä¿æ‰€æœ‰ç’°ç¯€çš„ä¸€è‡´æ€§ã€‚"
                },
                extraInfo: `
                    <div class="warning-section">
                        <h4>ğŸ” èº«ä»½ä¸æ˜ï¼ˆUnknown Patientï¼‰è™•ç†åŸå‰‡</h4>
                        <p>èº«ä»½ä¸æ˜æˆ–ç„¡æ„è­˜ç—…äººå±¬æ–¼é«˜é¢¨éšªç¾¤ï¼Œå…¶è™•ç½®çš„æ¨™æº–æµç¨‹ç‚ºï¼š</p>
                        <ul style="margin-left: 20px;">
                            <li><strong>ç«‹å³çµ¦äºˆï¼š</strong>é†«é™¢ç³»çµ±ç”Ÿæˆçš„**è‡¨æ™‚ç—…æ­·è™Ÿç¢¼**ï¼ˆå¦‚ï¼šç„¡åæ°ã€æ€¥è¨ºç·¨è™Ÿï¼‰ã€‚</li>
                            <li><strong>è£½ä½œæ‰‹ç’°ï¼š</strong>å°‡è‡¨æ™‚è­˜åˆ¥ç¢¼å’Œæ€§åˆ¥ã€å¹´é½¡ç­‰è³‡è¨Šè£½ä½œæˆ**æ‰‹ç’°**æˆ´ä¸Šã€‚</li>
                            <li><strong>ä¸€è‡´æ€§ï¼š</strong>æ‰€æœ‰æª¢é«”æ¨™ç±¤ã€å½±åƒå­¸ç”³è«‹å–®ã€æ²»ç™‚å–®æ“šå¿…é ˆèˆ‡æ‰‹ç’°ä¸Šçš„**è‡¨æ™‚è­˜åˆ¥ç¢¼å®Œå…¨ä¸€è‡´**ã€‚</li>
                            <li><strong>èº«ä»½ç¢ºèªï¼š</strong>ä¸€æ—¦èº«ä»½è¢«ç¢ºèªï¼Œæ‡‰ç«‹å³ç§»é™¤è‡¨æ™‚æ‰‹ç’°ï¼Œæ›´æ›ç‚ºæ­£å¼æ‰‹ç’°ï¼Œä¸¦åœ¨ç—…æ­·ä¸­æ˜ç¢ºè¨˜éŒ„æ›´æ›æ™‚é–“ã€‚</li>
                        </ul>
                    </div>
                `
            },
            {
                scenario: "å¤–ç§‘ç—…æˆ¿è­·ç†å¸«å°ç‹æº–å‚™ç‚º5åºŠçš„å¼µå¤ªå¤ªå’Œ6åºŠçš„æ—å¥³å£«æ¡é›†é£¯å‰è¡€ç³–æª¢é«”ã€‚ä»–å…ˆå¹«å¼µå¤ªå¤ªæŠ½è¡€ä¸¦å°‡æª¢é«”æ”¾å…¥æ¨è»Šï¼Œç„¶å¾Œå†ç‚ºæ—å¥³å£«æŠ½è¡€ã€‚",
                question: "ç‚ºäº†ç¢ºä¿æª¢é«”è­˜åˆ¥çš„çµ•å°å®‰å…¨ï¼Œå°ç‹æ­£ç¢ºçš„ä½œæ¥­æµç¨‹æ‡‰æ˜¯ï¼Ÿ",
                options: [
                    "å°‡å…©å€‹æª¢é«”éƒ½æ¡é›†å®Œæˆå¾Œï¼Œä¸€èµ·è²¼ä¸Šæ¨™ç±¤ï¼Œç¯€çœæ™‚é–“ã€‚",
                    "å…ˆæ¡é›†å¼µå¤ªå¤ªçš„æª¢é«”ï¼Œ**ç«‹å³åœ¨åºŠé‚Šè²¼ä¸Šå¼µå¤ªå¤ªçš„æ¨™ç±¤**ï¼›ç„¶å¾Œå†æ¡é›†æ—å¥³å£«çš„æª¢é«”ï¼Œ**ç«‹å³åœ¨åºŠé‚Šè²¼ä¸Šæ—å¥³å£«çš„æ¨™ç±¤**ã€‚",
                    "æ¡é›†å®Œæª¢é«”å¾Œï¼Œåœ¨è­·ç†ç«™çš„é›»è…¦æ—è²¼æ¨™ç±¤ï¼Œæ¸›å°‘åœ¨åºŠé‚Šé€—ç•™æ™‚é–“ã€‚",
                    "æ¡é›†æª¢é«”æ™‚ï¼Œåªéœ€è¦å£è¿°ç¢ºèªç—…äººå§“åå³å¯ï¼Œè²¼æ¨™ç±¤å¯ä»¥å»¶å¾Œã€‚"
                ],
                correct: 1,
                feedback: {
                    correct: "âœ… æ­£ç¢ºï¼æª¢é«”è²¼æ¨™ç±¤ä½œæ¥­å¿…é ˆåœ¨**ç—…äººåºŠé‚Šå³æ™‚å®Œæˆ**ã€‚é€™æ˜¯é é˜²æª¢é«”æ··æ·†çš„é—œéµæ­¥é©Ÿã€‚è²¼æ¨™ç±¤å‰ä»éœ€åŸ·è¡Œé›™é‡è­˜åˆ¥ã€‚",
                    incorrect: "âŒ ä¸æ­£ç¢ºï¼æª¢é«”è­˜åˆ¥éŒ¯èª¤æ˜¯åš´é‡çš„ç—…å®‰äº‹ä»¶ã€‚æ¨™æº–ä½œæ¥­è¦å®šï¼š**æ¡é›†æª¢é«”å¾Œï¼Œå¿…é ˆåœ¨ç—…äººåºŠé‚Šç«‹å³è²¼æ¨™ç±¤**ï¼Œä¸¦å†æ¬¡æ ¸å°ç—…äººæ‰‹ç’°ä¸Šçš„é›™è­˜åˆ¥ç¢¼èˆ‡æ¨™ç±¤è³‡è¨Šæ˜¯å¦ä¸€è‡´ã€‚"
                }
            }
        ];

        let currentQuestionIndex = 0;
        let score = 0;
        let answeredQuestions = new Array(questions.length).fill(null);
        let answeredCorrectly = new Array(questions.length).fill(false);

        function showIntroduction() {
            document.getElementById('startScreen').style.display = 'none';
            document.getElementById('introductionSection').style.display = 'block';
            updateCompletionCount();
        }

        function startQuiz() {
            document.getElementById('introductionSection').style.display = 'none';
            document.getElementById('questionContainer').style.display = 'block';
            currentQuestionIndex = 0;
            score = 0;
            answeredQuestions.fill(null);
            answeredCorrectly.fill(false);
            renderQuestion();
        }

        function renderQuestion() {
            if (currentQuestionIndex >= questions.length) {
                showResults();
                return;
            }

            const q = questions[currentQuestionIndex];
            document.getElementById('questionNumber').textContent = `å•é¡Œ ${currentQuestionIndex + 1} / ${questions.length}`;
            document.getElementById('scoreDisplay').textContent = `å¾—åˆ†: ${score}`;
            document.getElementById('progressBar').style.width = `${(currentQuestionIndex / questions.length) * 100}%`;

            document.getElementById('scenario').innerHTML = `
                <h3>æƒ…å¢ƒï¼š</h3>
                <div class="scenario-content">
                    <p>${q.scenario}</p>
                </div>
                <h3>å•é¡Œï¼š</h3>
                <div class="scenario-content">
                    <p>${q.question}</p>
                </div>
            `;
            
            const optionsContainer = document.getElementById('options');
            optionsContainer.innerHTML = '';
            
            q.options.forEach((optionText, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'option';
                optionDiv.textContent = optionText;
                optionDiv.setAttribute('data-index', index);
                optionDiv.onclick = () => selectOption(index);

                if (answeredQuestions[currentQuestionIndex] === index) {
                    optionDiv.classList.add('selected');
                }
                optionsContainer.appendChild(optionDiv);
            });

            const feedbackDiv = document.getElementById('feedback');
            feedbackDiv.style.display = 'none';
            document.getElementById('nextButton').style.display = 'none';
            document.getElementById('prevButton').style.display = currentQuestionIndex > 0 ? 'inline-block' : 'none';

            // å¦‚æœå·²ç¶“å›ç­”éï¼Œé¡¯ç¤ºçµæœ
            if (answeredQuestions[currentQuestionIndex] !== null) {
                showFeedback(answeredQuestions[currentQuestionIndex], answeredCorrectly[currentQuestionIndex]);
            }
        }

        function selectOption(selectedIndex) {
            if (answeredQuestions[currentQuestionIndex] !== null) return; // å·²ç¶“å›ç­”éï¼Œä¸å¯å†é¸

            const q = questions[currentQuestionIndex];
            const isCorrect = selectedIndex === q.correct;
            
            // è™•ç†åˆ†æ•¸å’Œç‹€æ…‹
            answeredQuestions[currentQuestionIndex] = selectedIndex;
            answeredCorrectly[currentQuestionIndex] = isCorrect;
            
            if (isCorrect) {
                score++;
            }
            
            // é¡¯ç¤ºçµæœ
            showFeedback(selectedIndex, isCorrect);
        }

        function showFeedback(selectedIndex, isCorrect) {
            const q = questions[currentQuestionIndex];
            const optionsDivs = document.getElementById('options').querySelectorAll('.option');
            
            optionsDivs.forEach((opt, index) => {
                opt.onclick = null; // é–å®šé¸é …
                if (index === selectedIndex) {
                    opt.classList.add(isCorrect ? 'correct' : 'incorrect');
                } else if (index === q.correct) {
                    opt.classList.add('correct');
                }
            });

            const feedbackDiv = document.getElementById('feedback');
            feedbackDiv.classList.remove('correct', 'incorrect');
            feedbackDiv.classList.add(isCorrect ? 'correct' : 'incorrect');
            
            let feedbackText = `<h4>${isCorrect ? 'ğŸ‘ å›ç­”æ­£ç¢ºï¼' : 'âŒ å›ç­”éŒ¯èª¤ã€‚'}</h4>`;
            feedbackText += `<p><strong>èªªæ˜ï¼š</strong>${isCorrect ? q.feedback.correct : q.feedback.incorrect}</p>`;
            
            if (q.extraInfo) {
                feedbackText += q.extraInfo;
            }

            feedbackDiv.innerHTML = feedbackText;
            feedbackDiv.style.display = 'block';
            
            document.getElementById('scoreDisplay').textContent = `å¾—åˆ†: ${score}`;
            document.getElementById('nextButton').style.display = 'inline-block';
        }

        function nextQuestion() {
            currentQuestionIndex++;
            renderQuestion();
        }

        function prevPage() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                renderQuestion();
            }
        }

        function showResults() {
            document.getElementById('questionContainer').style.display = 'none';
            document.getElementById('results').style.display = 'block';
            document.getElementById('progressBar').style.width = '100%';
            
            const finalScoreElement = document.getElementById('finalScore');
            const messageElement = document.getElementById('performanceMessage');
            
            finalScoreElement.textContent = `${score} / ${questions.length}`;
            
            let message = '';
            if (score === questions.length) {
                message = "æ­å–œæ‚¨ï¼æ‚¨å·²å®Œå…¨æŒæ¡ç—…äººè­˜åˆ¥çš„æ ¸å¿ƒåŸå‰‡ï¼Œæ˜¯ç—…äººå®‰å…¨çš„é‡è¦å®ˆè­·è€…ï¼";
                messageElement.style.color = '#28a745';
            } else if (score >= questions.length * 0.75) {
                message = "è¡¨ç¾å„ªç§€ï¼æ‚¨å·²æŒæ¡å¤§éƒ¨åˆ†é‡é»ï¼Œè«‹ç¹¼çºŒä¿æŒè­¦è¦ºå¿ƒï¼";
                messageElement.style.color = '#ffc107';
            } else {
                message = "è«‹æ³¨æ„ï¼æ‚¨çš„åˆ†æ•¸æœªé”æ¨™æº–ï¼Œè«‹é»é¸é‡æ–°å­¸ç¿’ï¼ŒåŠ å¼·ç—…äººè­˜åˆ¥çš„é«˜é¢¨éšªæƒ…å¢ƒè™•ç†ã€‚";
                messageElement.style.color = '#dc3545';
                document.getElementById('completionForm').style.display = 'none'; // ä½åˆ†ä¸é¡¯ç¤ºæäº¤
            }
            messageElement.textContent = message;

            // åªæœ‰é«˜åˆ†æ‰é¡¯ç¤ºæäº¤è¡¨å–®
            if (score === questions.length) { // å‡è¨­æ»¿åˆ†æ‰å¯æäº¤
                document.getElementById('completionForm').style.display = 'block';
            } else {
                document.getElementById('completionForm').style.display = 'none';
            }
            document.getElementById('completionMessage').style.display = 'none';
        }

        function submitCompletion() {
            const staffId = document.getElementById('staffId').value.trim();
            if (staffId) {
                // å¯¦éš›æ‡‰ç”¨ä¸­ï¼Œæ­¤è™•æ‡‰ä½¿ç”¨ AJAX æˆ– Fetch API å°‡ (staffId, score) ç™¼é€åˆ°ä¼ºæœå™¨é€²è¡Œç´€éŒ„
                // æ¨¡æ“¬æäº¤æˆåŠŸ
                document.getElementById('completionForm').style.display = 'none';
                document.getElementById('completionMessage').style.display = 'block';
                // å¯ä»¥åœ¨æ­¤è™•è¨­å®šä¸€å€‹ localStorage æˆ– SessionStorage æ¨™è¨˜ï¼Œæ¨¡æ“¬å­¸åˆ†å·²ç²å¾—
                let count = parseInt(localStorage.getItem('completionCount') || '0');
                localStorage.setItem('completionCount', count + 1);
                updateCompletionCount();
            } else {
                alert('è«‹è¼¸å…¥æ‚¨çš„äººäº‹è™Ÿç¢¼ï¼');
            }
        }

        function restartQuiz() {
            document.getElementById('results').style.display = 'none';
            document.getElementById('startScreen').style.display = 'block';
            currentQuestionIndex = 0;
            score = 0;
            answeredQuestions.fill(null);
            answeredCorrectly.fill(false);
            document.getElementById('completionForm').style.display = 'block';
            document.getElementById('completionMessage').style.display = 'none';
            document.getElementById('staffId').value = '';
        }

        function updateCompletionCount() {
            const count = localStorage.getItem('completionCount') || '0';
            const countElement = document.getElementById('completionMessageCount');
            if(countElement) {
                countElement.textContent = `æ‚¨å·²å®Œæˆæœ¬èª²ç¨‹ ${count} æ¬¡`;
            }
        }

        // é é¢åŠ è¼‰å®Œæˆæ™‚åŸ·è¡Œ
        document.addEventListener('DOMContentLoaded', () => {
            updateCompletionCount();
        });
    </script>
</body>
</html>
