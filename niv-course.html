<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BiPAPåœ˜éšŠç…§è­·å­¸ç¿’ç³»çµ±</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;x
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Microsoft JhengHei', sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
            max-width: 900px;
            width: 100%;
            padding: 40px;
            animation: slideIn 0.6s ease-out;
            position: relative;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 3px solid #2a5298;
        }

        h1 {
            color: #1e3c72;
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .subtitle {
            color: #666;
            font-size: 1.2em;
        }

        .start-screen {
            text-align: center;
            padding: 40px;
        }

        .reference-link {
            margin-top: 20px;
            font-size: 0.95em;
            color: #666;
        }

        .reference-link a {
            color: #2a5298;
            text-decoration: none;
            font-weight: 600;
            transition: color 0.3s ease;
        }

        .reference-link a:hover {
            color: #667eea;
            text-decoration: underline;
        }

        .introduction-section {
            display: none;
            padding: 30px;
            text-align: left;
            animation: fadeIn 0.5s ease-out;
        }

        .introduction-section h2 {
            color: #1e3c72;
            font-size: 1.8em;
            margin-bottom: 20px;
            text-align: center;
        }

        .intro-content {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 25px;
            border-left: 5px solid #667eea;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .intro-content h3 {
            color: #1e3c72;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .intro-content p, .intro-content li {
            line-height: 1.8;
            color: #444;
            font-size: 1.05em;
            margin-bottom: 10px;
        }

        .intro-content ul {
            margin-left: 25px;
            margin-top: 10px;
        }

        .bipap-diagram {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin: 20px 0;
            text-align: center;
        }

        .bipap-diagram h4 {
            color: #1e3c72;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .device-image {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            padding: 20px;
            margin: 10px auto;
            max-width: 600px;
        }

        .device-image img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 0 auto;
        }

        .indicator-list {
            text-align: left;
            margin: 20px auto;
            max-width: 500px;
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
        }

        .indicator-list li {
            margin: 8px 0;
            color: #333;
            font-size: 0.95em;
        }

        .indicator-list strong {
            color: #1e3c72;
        }

        .warning-section {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }

        .warning-section h4 {
            color: #856404;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .warning-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-top: 15px;
        }

        .warning-box {
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .warning-box h5 {
            color: #dc3545;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .warning-box ul {
            margin-left: 20px;
            font-size: 0.95em;
            color: #495057;
            text-align: left;
        }

        .warning-box li {
            margin: 5px 0;
        }

        .start-button, .continue-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 18px 50px;
            font-size: 1.2em;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            letter-spacing: 1px;
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
            margin-top: 20px;
        }

        .start-button:hover, .continue-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(102, 126, 234, 0.4);
        }

        .question-container {
            display: none;
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .progress-bar {
            background: #e0e0e0;
            height: 12px;
            border-radius: 20px;
            margin-bottom: 30px;
            overflow: hidden;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .progress {
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            height: 100%;
            border-radius: 20px;
            transition: width 0.5s ease;
            box-shadow: 0 2px 4px rgba(102, 126, 234, 0.3);
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            color: #333;
        }

        .question-number {
            font-size: 1.1em;
            font-weight: 600;
            color: #667eea;
        }

        .score {
            font-size: 1.1em;
            font-weight: 600;
            color: #764ba2;
        }

        .scenario {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 25px;
            border-left: 5px solid #667eea;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .scenario h3 {
            color: #1e3c72;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .scenario p {
            line-height: 1.8;
            color: #444;
            font-size: 1.05em;
        }

        .options {
            margin-top: 25px;
        }

        .option {
            background: white;
            border: 2px solid #e0e0e0;
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .option:hover {
            border-color: #667eea;
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.2);
        }

        .option.selected {
            border-color: #667eea;
            background: linear-gradient(135deg, #f3e7ff 0%, #e6e0ff 100%);
        }

        .option.correct {
            border-color: #4caf50;
            background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
            animation: correctPulse 0.6s ease;
        }

        .option.incorrect {
            border-color: #f44336;
            background: linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%);
            animation: shake 0.5s ease;
        }

        @keyframes correctPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .feedback {
            margin-top: 20px;
            padding: 20px;
            border-radius: 12px;
            display: none;
            animation: slideDown 0.5s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .feedback.correct {
            background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
            border: 2px solid #4caf50;
            color: #155724;
        }

        .feedback.incorrect {
            background: linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%);
            border: 2px solid #f44336;
            color: #721c24;
        }

        .feedback h4 {
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .next-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.1em;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 20px auto 0;
            font-weight: 600;
            display: none;
            box-shadow: 0 8px 15px rgba(102, 126, 234, 0.3);
        }

        .next-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 20px rgba(102, 126, 234, 0.4);
        }

        .results {
            display: none;
            text-align: center;
            padding: 40px;
            animation: fadeIn 0.5s ease-out;
        }

        .results h2 {
            color: #1e3c72;
            margin-bottom: 20px;
            font-size: 2.2em;
        }

        .final-score {
            font-size: 3em;
            color: #667eea;
            margin: 20px 0;
            font-weight: 700;
            animation: bounce 1s ease;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        .performance-message {
            font-size: 1.3em;
            color: #666;
            margin-bottom: 30px;
        }

        .completion-form {
            background: #f5f7fa;
            padding: 30px;
            border-radius: 15px;
            margin: 30px auto;
            max-width: 500px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .completion-form h3 {
            color: #1e3c72;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 600;
        }

        .form-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1.1em;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus {
            outline: none;
            border-color: #667eea;
        }

        .submit-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.1em;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            box-shadow: 0 8px 15px rgba(102, 126, 234, 0.3);
        }

        .submit-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 20px rgba(102, 126, 234, 0.4);
        }

        .submit-button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .completion-message {
            display: none;
            background: #d4edda;
            color: #155724;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            font-weight: 600;
        }

        .restart-button {
            background: linear-gradient(135deg, #56ab2f 0%, #a8e063 100%);
            color: white;
            border: none;
            padding: 15px 50px;
            font-size: 1.2em;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            box-shadow: 0 10px 20px rgba(86, 171, 47, 0.3);
            margin-top: 20px;
        }

        .restart-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(86, 171, 47, 0.4);
        }

        .key-point {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
            border-radius: 8px;
            font-weight: 500;
        }

        .footer-credit {
            position: absolute;
            bottom: -50px;
            left: 0;
            right: 0;
            text-align: center;
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9em;
            padding: 10px;
        }

        /* æ–°å¢ */
        .scenario-content {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 25px;
            border-left: 5px solid #667eea;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        @media (max-width: 600px) {
            .container {
                padding: 20px;
                margin-bottom: 60px;
            }
            
            h1 {
                font-size: 1.8em;
            }
            
            .scenario {
                padding: 20px;
            }
            
            .option {
                padding: 15px;
            }

            .warning-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>BiPAPåœ˜éšŠç…§è­·</h1>
            <p class="subtitle">è‡¨åºŠæƒ…å¢ƒæ¨¡æ“¬è¨“ç·´</p>
        </div>

        <div class="start-screen" id="startScreen">
            <h2>æ­¡è¿ä½¿ç”¨BiPAPåœ˜éšŠç…§è­·äº’å‹•å­¸ç¿’èª²ç¨‹</h2>
            <p style="margin: 20px 0; font-size: 1.1em; color: #666;">
                æœ¬èª²ç¨‹å°‡é€éè‡¨åºŠæƒ…å¢ƒæ¨¡æ“¬ï¼Œå¹«åŠ©æ‚¨æŒæ¡BiPAPç…§è­·èˆ‡å®‰å…¨æ³¨æ„äº‹é …
            </p>
            <div class="key-point">
                <strong>é‡è¦åŸå‰‡ï¼š</strong>å…ˆé–‹æ©Ÿï¼Œå†æˆ´é¢ç½©ï¼›å…ˆè„«é¢ç½©ï¼Œå†é—œæ©Ÿ
            </div>
            <div class="reference-link">
                å­¸ç¿’å…§å®¹è«‹åƒè€ƒï¼š<a href="niv-sop.pdf" target="_blank">ç¸½é™¢-å…§ç§‘-å‘¼å¸-2-20022 ä½¿ç”¨éä¾µè¥²æ€§å‘¼å¸å™¨é†«ç™‚åœ˜éšŠç…§è­·ç®¡ç†ç¨‹åºæ›¸</a>
            </div>
            <button class="start-button" onclick="showIntroduction()">é–‹å§‹å­¸ç¿’</button>
        </div>

        <div class="introduction-section" id="introductionSection">
            <h2>å‰è¨€</h2>
            
            <div class="intro-content">
                <h3>BiPAPåœ¨è‡¨åºŠçš„æ‡‰ç”¨æƒ…å¢ƒ</h3>
                <p>BiPAPï¼ˆé›™å£“å‹é™½å£“å‘¼å¸å™¨ï¼‰æ˜¯ä¸€ç¨®éä¾µè¥²æ€§é€šæ°£æ²»ç™‚è¨­å‚™ï¼Œåœ¨è‡¨åºŠä¸Šæœ‰å»£æ³›çš„æ‡‰ç”¨ã€‚å¸¸è¦‹çš„ä½¿ç”¨æƒ…å¢ƒåŒ…æ‹¬ï¼š</p>
                <ul>
                    <li><strong>æ€¥æ€§å‘¼å¸è¡°ç«­ï¼š</strong>å¦‚COPDæ€¥æ€§ç™¼ä½œã€å¿ƒå› æ€§è‚ºæ°´è…«ç­‰æ€¥æ€§ç‹€æ³</li>
                    <li><strong>æ…¢æ€§å‘¼å¸ç–¾ç—…ï¼š</strong>æ…¢æ€§é˜»å¡æ€§è‚ºç–¾ç—…ã€ç¥ç¶“è‚Œè‚‰ç–¾ç—…é€ æˆçš„å‘¼å¸åŠŸèƒ½ä¸å…¨</li>
                    <li><strong>ç¡çœ å‘¼å¸éšœç¤™ï¼š</strong>é˜»å¡æ€§ç¡çœ å‘¼å¸ä¸­æ­¢ç—‡ã€ä¸­æ¨æ€§ç¡çœ å‘¼å¸ä¸­æ­¢ç—‡</li>
                    <li><strong>è¡“å¾Œç…§è­·ï¼š</strong>é é˜²æˆ–æ²»ç™‚è¡“å¾Œè‚ºæ“´å¼µä¸å…¨ã€å”åŠ©è„«é›¢ä¾µè¥²æ€§å‘¼å¸å™¨</li>
                    <li><strong>å…¶ä»–é©æ‡‰ç—‡ï¼š</strong>è‚¥èƒ–ä½é€šæ°£ç—‡å€™ç¾¤ã€èƒ¸å»“ç•¸å½¢ç­‰é€ æˆçš„é™åˆ¶æ€§è‚ºç–¾ç—…</li>
                </ul>
            </div>

            <div class="bipap-diagram">
                <h4>BiPAPè¨­å‚™ä»‹é¢ç¤ºæ„åœ–</h4>
                <div class="device-image">
                    <img src="niv1.jpg" alt="BiPAPè¨­å‚™ä»‹é¢" style="max-width: 100%; height: auto;">
                    <ul class="indicator-list">
                        <li><strong>2. é›»æºæŒ‡ç¤ºç‡ˆï¼š</strong>é¡¯ç¤ºé›»æºé€£æ¥ç‹€æ…‹</li>
                        <li><strong>3. æ²»ç™‚é–‹é—œæŒ‡ç¤ºç‡ˆï¼š</strong>è—è‰²ç‡ˆé–ƒçˆä»£è¡¨è£ç½®é€šæ°£ä¸­</li>
                        <li><strong>4. è­¦å ±éœéŸ³ï¼é‡è¨­æŒ‰éˆ•ï¼š</strong>è§¸ç™¼è­¦å ±æ™‚æœƒç™¼äº®ï¼ŒéœéŸ³æ™‚æœƒé–ƒçˆ</li>
                        <li><strong>5. è­¦å ±åˆ—ï¼š</strong>ç´…è‰²ç‡ˆé–ƒçˆè¡¨ç¤ºé«˜ç´šåˆ¥è­¦å ±</li>
                    </ul>
                </div>
                <p style="margin-top: 15px; color: #666; font-size: 0.9em;">
                    â€» ä»¥ResMed Astral 100æ©Ÿå‹ç‚ºä¾‹
                </p>
            </div>

            <div class="intro-content">
                <h3>åœ˜éšŠç…§è­·çš„é‡è¦æ€§</h3>
                <p>BiPAPçš„ä½¿ç”¨éœ€è¦è·¨é ˜åŸŸåœ˜éšŠçš„å¯†åˆ‡åˆä½œï¼ŒåŒ…æ‹¬ï¼š</p>
                <ul>
                    <li><strong>è‡¨åºŠé†«å¸«ï¼š</strong>è©•ä¼°é©æ‡‰ç—‡ã€é–‹ç«‹é†«å›‘ã€ç›£æ¸¬æ²»ç™‚æˆæ•ˆã€ç—…æƒ…è§£é‡‹åŠè¡›æ•™</li>
                    <li><strong>å‘¼å¸æ²»ç™‚å¸«ï¼š</strong>è¨­å®šåƒæ•¸ã€åŸ·è¡Œå‘¼å¸å™¨ç…§è­·ã€å”åŠ©è„«é›¢è¨“ç·´ã€ç—…äººåŠç…§è­·è€…è¡›æ•™</li>
                    <li><strong>è­·ç†å¸«ï¼š</strong>ç›£æ¸¬ç”Ÿå‘½å¾µè±¡ã€çš®è†šç…§è­·ã€åŸ·è¡Œé†«å›‘ã€ç—…äººåŠç…§è­·è€…è¡›æ•™</li>
                    <li><strong>å…¶ä»–å°ˆæ¥­äººå“¡ï¼š</strong>ä¾ç—…äººéœ€æ±‚æä¾›æ•´åˆæ€§ç…§è­·</li>
                </ul>
                <p style="margin-top: 15px;">é€éåœ˜éšŠåˆä½œï¼Œæ‰èƒ½ç¢ºä¿ç—…äººç²å¾—å®‰å…¨ä¸”å®Œå–„çš„BiPAPæ²»ç™‚ç…§è­·ã€‚</p>
            </div>

            <div style="text-align: center;">
                <button class="continue-button" onclick="startQuiz()">é€²å…¥è‡¨åºŠæƒ…å¢ƒå­¸ç¿’</button>
            </div>
        </div>

        <div class="question-container" id="questionContainer">
            <div class="progress-bar">
                <div class="progress" id="progressBar"></div>
            </div>
            
            <div class="question-header">
                <span class="question-number" id="questionNumber"></span>
                <span class="score" id="scoreDisplay">å¾—åˆ†: 0</span>
            </div>

            <div class="scenario" id="scenario"></div>
            
            <div class="options" id="options"></div>
            
            <div class="feedback" id="feedback"></div>
            
            <div style="text-align: center;">
                <button class="next-button" id="prevButton" onclick="prevPage()" style="background:linear-gradient(135deg,#bbb 0%,#888 100%);margin-right:10px;">ä¸Šä¸€é </button>
                <button class="next-button" id="nextButton" onclick="nextQuestion()">ä¸‹ä¸€é¡Œ</button>
            </div>
        </div>

        <div class="results" id="results">
            <h2>å­¸ç¿’å®Œæˆï¼</h2>
            <div class="final-score" id="finalScore"></div>
            <p class="performance-message" id="performanceMessage"></p>
            
            <div class="completion-form" id="completionForm">
                <h3>è«‹è¼¸å…¥æ‚¨çš„è³‡æ–™ä»¥å®Œæˆå­¸ç¿’ç´€éŒ„</h3>
                <div class="form-group">
                    <label for="staffId">äººäº‹è™Ÿç¢¼</label>
                    <input type="text" id="staffId" placeholder="è«‹è¼¸å…¥æ‚¨çš„äººäº‹è™Ÿç¢¼" required>
                </div>
                <button class="submit-button" onclick="submitCompletion()">æäº¤å­¸ç¿’ç´€éŒ„</button>
            </div>
            
            <div class="completion-message" id="completionMessage">
                âœ… å­¸ç¿’ç´€éŒ„å·²å„²å­˜ï¼æ„Ÿè¬æ‚¨å®ŒæˆBiPAPåœ˜éšŠç…§è­·å­¸ç¿’èª²ç¨‹ã€‚
            </div>
            
            <button class="restart-button" onclick="restartQuiz()">é‡æ–°å­¸ç¿’</button>
        </div>

        <div class="footer-credit">
            å¥‡ç¾é†«é™¢å‘¼å¸æ²»ç™‚ç§‘åŠå“è³ªç®¡ç†ä¸­å¿ƒè£½ä½œ<br>
            <div id="lastUpdated" style="display:inline-block; color:rgba(255,255,255,0.8); font-size:0.9em; margin-top:4px;">æœ€å¾Œæ›´æ–°æ—¥æœŸï¼š2025.7.10 (Ver 1.5)</div>
        </div>
    </div>

    <script>
        const questions = [
            {
                scenario: "æ—©ä¸Š8é»ï¼Œè­·ç†å¸«å°é™³æº–å‚™ç‚ºæå…ˆç”Ÿï¼ˆ75æ­²ï¼ŒCOPDæ€¥æ€§ç™¼ä½œï¼‰æˆ´ä¸ŠBiPAPã€‚æå…ˆç”Ÿæ„è­˜æ¸…æ¥šä½†å‘¼å¸æ€¥ä¿ƒï¼ŒSpO2 88%ã€‚å‘¼å¸æ²»ç™‚å¸«å·²ç¶“æº–å‚™å¥½BiPAPæ©Ÿå™¨å’Œé¢ç½©ã€‚",
                question: "å°é™³æ‡‰è©²æ¡å–ä»¥ä¸‹å“ªå€‹æ­£ç¢ºçš„æ“ä½œé †åºï¼Ÿ",
                options: [
                    "å…ˆå¹«æå…ˆç”Ÿæˆ´ä¸Šé¢ç½©ï¼Œç¢ºèªå¯†åˆåº¦å¾Œå†é–‹å•ŸBiPAP",
                    "å…ˆé–‹å•ŸBiPAPè®“æ°£æµé–‹å§‹ä¾›æ‡‰ï¼Œå†å¹«æå…ˆç”Ÿæˆ´ä¸Šé¢ç½©",
                    "åŒæ™‚é–‹æ©Ÿå’Œæˆ´é¢ç½©ï¼Œä»¥ç¯€çœæ™‚é–“",
                    "å…ˆæˆ´é¢ç½©ä½†ä¸æ‰£ç·Šï¼Œé–‹æ©Ÿå¾Œå†èª¿æ•´"
                ],
                correct: 1,
                feedback: {
                    correct: "æ­£ç¢ºï¼å¿…é ˆå…ˆé–‹æ©Ÿè®“BiPAPé–‹å§‹ä¾›æ°£å¾Œï¼Œæ‰èƒ½å¹«ç—…äººæˆ´ä¸Šé¢ç½©ã€‚é€™æ˜¯ç‚ºäº†é¿å…ç—…äººåœ¨ç„¡æ°£æµç‹€æ…‹ä¸‹æˆ´é¢ç½©é€ æˆçª’æ¯æ„Ÿã€‚",
                    incorrect: "ä¸æ­£ç¢ºã€‚è¨˜ä½å®‰å…¨åŸå‰‡ï¼šå…ˆé–‹æ©Ÿï¼Œå†æˆ´é¢ç½©ã€‚è‹¥å…ˆæˆ´é¢ç½©å†é–‹æ©Ÿï¼Œç—…äººå¯èƒ½æœƒå› ç„¡æ°£æµè€Œæ„Ÿåˆ°çª’æ¯ä¸é©ã€‚"
                }
            },
            {
                scenario: "æ‰¿ä¸Šé¡Œï¼Œæå…ˆç”Ÿæˆ´ä¸ŠBiPAPå·²ç¶“2å°æ™‚ï¼Œä½†ä»æŒçºŒå‘¼å¸æ€¥ä¿ƒï¼ŒSpO2ç¶­æŒåœ¨89-90%ä¹‹é–“ï¼Œä¸”å‡ºç¾æ„è­˜èºå‹•çš„æƒ…æ³ã€‚é†«ç™‚åœ˜éšŠé‡æ–°è©•ä¼°å¾Œç™¼ç¾ç—…äººç„¡æ³•è½å¾æŒ‡ä»¤ï¼Œå„˜ç®¡BiPAPè¨­å®šå·²èª¿æ•´è‡³é©ç•¶åƒæ•¸ï¼Œç—…äººçš„å‘¼å¸çª˜è¿«ä¸¦æœªæ”¹å–„ã€‚",
                question: "é¢å°é€™ç¨®æƒ…æ³ï¼Œé†«ç™‚åœ˜éšŠæ‡‰è©²å„ªå…ˆè€ƒæ…®å“ªå€‹è™•ç½®ï¼Ÿ",
                options: [
                    "ç¹¼çºŒèª¿é«˜BiPAPçš„å£“åŠ›è¨­å®šï¼Œçµ¦äºˆæ›´å¤šæ™‚é–“è§€å¯Ÿ",
                    "æ”¹ç”¨é«˜æµé‡æ°§æ°£é¼»å°ç®¡ï¼ˆHFNCï¼‰æ²»ç™‚",
                    "è©•ä¼°æ˜¯å¦éœ€è¦æ’ç®¡é€²è¡Œä¾µè¥²æ€§æ©Ÿæ¢°é€šæ°£æ²»ç™‚",
                    "çµ¦äºˆé®éœè—¥ç‰©è®“ç—…äººé…åˆBiPAPä½¿ç”¨"
                ],
                correct: 2,
                feedback: {
                    correct: "æ­£ç¢ºï¼ç•¶BiPAPæ²»ç™‚æ•ˆæœä¸ä½³ï¼Œç—…äººæŒçºŒå‘¼å¸çª˜è¿«ä¸”å‡ºç¾æ„è­˜è®ŠåŒ–æ™‚ï¼Œæ‡‰ç«‹å³è©•ä¼°æ˜¯å¦éœ€è¦å‡ç´šç‚ºä¾µè¥²æ€§é€šæ°£æ²»ç™‚ã€‚é€™æ˜¯BiPAPä½¿ç”¨çš„é‡è¦æ±ºç­–é»ã€‚",
                    incorrect: "è«‹æ³¨æ„ï¼BiPAPæ²»ç™‚å¤±æ•—çš„å¾µå…†åŒ…æ‹¬æŒçºŒä½è¡€æ°§ã€æ„è­˜æ”¹è®Šã€å‘¼å¸çª˜è¿«ç„¡æ”¹å–„ç­‰ã€‚æ­¤æ™‚æ‡‰è€ƒæ…®æ’ç®¡æ²»ç™‚ï¼Œé¿å…å»¶èª¤ç—…æƒ…ã€‚"
                },
                extraInfo: `
                    <div class="warning-section" style="text-align: center;">
                        <h4>BiPAPä½¿ç”¨ç¦å¿Œç—‡èˆ‡ä½µç™¼ç—‡</h4>
                        <div class="warning-grid">
                            <div class="warning-box">
                                <h5>ç¦å¿Œç—‡</h5>
                                <ul>
                                    <li>å‘¼å¸æˆ–å¿ƒè·³åœæ­¢ã€æ˜è¿·</li>
                                    <li>èºå‹•æˆ–ç„¡æ³•é…åˆ</li>
                                    <li>åš´é‡é¡é¢å¤–å‚·</li>
                                    <li>è¿‘æœŸä¸Šæ¶ˆåŒ–é“æ‰‹è¡“</li>
                                    <li>å˜”åé¢¨éšªé«˜</li>
                                </ul>
                            </div>
                            <div class="warning-box">
                                <h5>å¯èƒ½ä½µç™¼ç—‡</h5>
                                <ul>
                                    <li>èƒƒè„¹æ°£</li>
                                    <li>è‡‰éƒ¨å£“å‚·</li>
                                    <li>çœ¼éƒ¨åˆºæ¿€</li>
                                    <li>å£ä¹¾ä¸é©</li>
                                    <li>é™ä½å¿ƒè¼¸å‡ºé‡</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                `
            },
            {
                scenario: "ä¸Šåˆ11é»ï¼Œå‘¼å¸æ²»ç™‚å¸«å°å¼µå‰›å®Œæˆç‹å¤ªå¤ªï¼ˆ68æ­²ï¼Œå¿ƒå› æ€§è‚ºæ°´è…«ï¼‰çš„BiPAPåƒæ•¸èª¿æ•´ã€‚ç›®å‰è¨­å®šç‚ºIPAP 14 cmH2Oã€EPAP 8 cmH2Oã€FiO2 40%ã€‚è­·ç†å¸«å°é™³æº–å‚™æ¥ç­ï¼Œå°å¼µéœ€è¦é€²è¡Œäº¤ç­èªªæ˜ã€‚",
                question: "ä»¥ä¸‹å“ªå€‹äº¤ç­æºé€šæ–¹å¼æœ€ç¬¦åˆåœ˜éšŠè³‡æºç®¡ç†(TRM)çš„åŸå‰‡ï¼Ÿ",
                options: [
                    "ã€Œç‹å¤ªå¤ªç”¨BiPAPï¼Œåƒæ•¸éƒ½èª¿å¥½äº†ï¼Œæ²’ä»€éº¼å•é¡Œã€‚ã€",
                    "ã€Œç‹å¤ªå¤ªå¿ƒå› æ€§è‚ºæ°´è…«ä½¿ç”¨BiPAPï¼Œç›®å‰IPAP 14ã€EPAP 8ã€FiO2 40%ï¼ŒSpO2å¾88%ä¸Šå‡åˆ°95%ï¼Œå‘¼å¸æ¬¡æ•¸å¾32é™åˆ°22æ¬¡/åˆ†ï¼Œè«‹æŒçºŒç›£æ¸¬å‘¼å¸å‹æ…‹ã€‚ã€",
                    "ã€Œæ©Ÿå™¨åœ¨14/8ï¼Œä½ çœ‹è‘—è¾¦å°±å¥½ã€‚ã€",
                    "ã€Œç—…äººæƒ…æ³é‚„å¯ä»¥ï¼Œè©³ç´°è³‡æ–™éƒ½åœ¨é›»è…¦è£¡ã€‚ã€"
                ],
                correct: 1,
                feedback: {
                    correct: "å®Œç¾çš„äº¤ç­ï¼ä½¿ç”¨SBARæ¶æ§‹ï¼Œæä¾›å…·é«”æ•¸æ“šï¼ˆS-æƒ…æ³ï¼šå¿ƒå› æ€§è‚ºæ°´è…«ï¼›B-èƒŒæ™¯ï¼šBiPAPåƒæ•¸ï¼›A-è©•ä¼°ï¼šç”Ÿå‘½å¾µè±¡æ”¹å–„ï¼›R-å»ºè­°ï¼šæŒçºŒç›£æ¸¬ï¼‰ï¼Œé€™æ˜¯è‰¯å¥½åœ˜éšŠæºé€šçš„å…¸ç¯„ã€‚",
                    incorrect: "äº¤ç­æ™‚æ‡‰æ¡ç”¨çµæ§‹åŒ–æºé€šï¼Œæ˜ç¢ºèªªæ˜ï¼šè¨ºæ–·ã€ç›®å‰æ²»ç™‚åƒæ•¸ã€ç—…äººåæ‡‰ã€éœ€è¦æ³¨æ„äº‹é …ã€‚é€™æ¨£æ‰èƒ½ç¢ºä¿ç…§è­·çš„é€£çºŒæ€§å’Œç—…äººå®‰å…¨ã€‚"
                },
                extraInfo: `
                    <div class="intro-content" style="margin-bottom: 20px;">
                        <h3 style="text-align: center;">BiPAPé‡è¦åƒæ•¸æ„ç¾©</h3>
                        <div style="background: #e8f5e9; padding: 20px; border-radius: 10px; margin-top: 15px;">
                            <ul style="font-size: 1em; list-style: none; padding: 0;">
                                <li style="margin-bottom: 15px;">
                                    <strong style="color: #2e7d32;">ğŸ“Š IPAPï¼ˆå¸æ°£å£“åŠ›ï¼‰ï¼š</strong>å¸æ°£æ™‚çš„å£“åŠ›ï¼ˆ10-20 cmH2Oï¼‰<br>
                                    <em style="color: #666; font-size: 0.9em; margin-left: 30px; display: block;">
                                    â†’ å°±åƒæœ‰äººåœ¨ä½ å¸æ°£æ™‚å¹«ä½ æ¨ä¸€æŠŠï¼Œè®“ç©ºæ°£æ›´å®¹æ˜“é€²å…¥è‚ºéƒ¨
                                    </em>
                                </li>
                                <li style="margin-bottom: 15px;">
                                    <strong style="color: #2e7d32;">ğŸ“‰ EPAPï¼ˆåæ°£å£“åŠ›ï¼‰ï¼š</strong>å‘¼æ°£æ™‚çš„å£“åŠ›ï¼ˆ4-10 cmH2Oï¼‰<br>
                                    <em style="color: #666; font-size: 0.9em; margin-left: 30px; display: block;">
                                    â†’ åæ°£æ™‚ä¿æŒè¼ƒä½çš„å£“åŠ›ï¼Œé¿å…è‚ºæ³¡å¡Œé™·ï¼Œè®“å‘¼å¸æ›´è¼•é¬†
                                    </em>
                                </li>
                                <li>
                                    <strong style="color: #2e7d32;">ğŸ’¨ FiO2ï¼ˆæ°§æ°£æ¿ƒåº¦ï¼‰ï¼š</strong>å¸å…¥æ°§æ¿ƒåº¦ï¼ˆ21-100%ï¼‰<br>
                                    <em style="color: #666; font-size: 0.9em; margin-left: 30px; display: block;">
                                    â†’ ç©ºæ°£ä¸­çš„æ°§æ°£æ¯”ä¾‹ï¼Œæ­£å¸¸ç©ºæ°£æ˜¯21%
                                    </em>
                                </li>
                            </ul>
                        </div>
                        <p style="margin-top: 15px; color: #666; font-size: 0.9em; text-align: center;">
                            â€» å‘¼å¸æ²»ç™‚å¸«æœƒæ ¹æ“šç—…äººç‹€æ³èª¿æ•´é€™äº›åƒæ•¸ï¼Œä¸¦å‘åœ˜éšŠå ±å‘Šæ²»ç™‚åæ‡‰
                        </p>
                    </div>
                `
            },
            {
                scenario: "ä¸‹åˆ2é»ï¼Œç‹å¤ªå¤ªï¼ˆ68æ­²ï¼Œå¿ƒå› æ€§è‚ºæ°´è…«ï¼‰ä½¿ç”¨BiPAPæ²»ç™‚ä¸­ï¼Œå¥¹è¡¨ç¤ºå£æ¸´æƒ³è¦å–æ°´ã€‚çœ‹è­·é˜¿ç¾æº–å‚™å”åŠ©ã€‚ä¾ç…§æ¨™æº–ç…§è­·ç¨‹åºï¼Œå–æ°´æ™‚æ‡‰å¦‚ä½•è™•ç†ï¼Ÿ",
                question: "é˜¿ç¾å”åŠ©ç‹å¤ªå¤ªå–æ°´çš„æ­£ç¢ºåšæ³•æ˜¯ï¼Ÿ",
                options: [
                    "å®Œå…¨å–ä¸‹é¢ç½©ï¼Œé—œé–‰BiPAPï¼Œè®“ç‹å¤ªå¤ªæ…¢æ…¢å–æ°´",
                    "ä¿æŒBiPAPé‹è½‰ï¼ŒçŸ­æš«å°‡é¢ç½©å´é‚Šæ‰£ç’°æ‹†ä¸‹è®“ç‹å¤ªå¤ªå–æ°´",
                    "ä¸éœ€è¦å‹•é¢ç½©ï¼Œç”¨å¸ç®¡å¾é¢ç½©é‚Šç·£è®“ç‹å¤ªå¤ªå–æ°´",
                    "å…ˆé™ä½BiPAPå£“åŠ›ï¼Œå†è®“ç‹å¤ªå¤ªå–æ°´"
                ],
                correct: 1,
                feedback: {
                    correct: "æ­£ç¢ºï¼çŸ­æš«é£²æ°´æ™‚ï¼Œå¯ä¿æŒBiPAPé‹è½‰ï¼Œåƒ…å°‡é¢ç½©å´é‚Šæ‰£ç’°æš«æ™‚æ‹†ä¸‹ã€‚é€™æ¨£å¯é¿å…å®Œå…¨ä¸­æ–·æ²»ç™‚ï¼ŒåŒæ™‚æ»¿è¶³ç—…äººéœ€æ±‚ã€‚",
                    incorrect: "è«‹æ³¨æ„ï¼ŒçŸ­æš«é£²æ°´æ™‚ä¸éœ€å®Œå…¨åœæ©Ÿã€‚æ­£ç¢ºåšæ³•æ˜¯ä¿æŒBiPAPé‹è½‰ï¼Œåƒ…çŸ­æš«æ‹†é–‹é¢ç½©å´é‚Šæ‰£ç’°å³å¯ã€‚"
                },
                extraInfo: `
                    <div class="intro-content" style="margin-bottom: 20px;">
                        <h3 style="text-align: center;">BiPAPä½¿ç”¨æœŸé–“é£²æ°´åŠé€²é£Ÿæ³¨æ„äº‹é …</h3>
                        <div style="background: #e3f2fd; padding: 20px; border-radius: 10px; margin-top: 15px;">
                            <h4 style="color: #1565c0; margin-bottom: 15px;">çŸ­æš«é£²æ°´ï¼ˆæ²¾æ¿•å˜´å”‡ã€å°å£å–æ°´ï¼‰</h4>
                            <ul style="margin-left: 20px; color: #424242;">
                                <li>ä¿æŒBiPAPæŒçºŒé‹è½‰</li>
                                <li>åƒ…å°‡é¢ç½©å´é‚Šæ‰£ç’°çŸ­æš«æ‹†ä¸‹</li>
                                <li>å–æ°´å¾Œç«‹å³å°‡æ‰£ç’°æ‰£å›</li>
                                <li>æ™‚é–“ä¸å¯å¤ªä¹…ï¼Œé¿å…è¡€æ°§ä¸‹é™</li>
                            </ul>
                            <h4 style="color: #1565c0; margin: 20px 0 15px 0;">é€²é£Ÿæˆ–é•·æ™‚é–“é£²æ°´</h4>
                            <ul style="margin-left: 20px; color: #424242;">
                                <li>å¿…é ˆç”±é†«è­·äººå“¡åŸ·è¡Œ</li>
                                <li>éœ€å®Œå…¨å–ä¸‹é¢ç½©ä¸¦åœæ­¢é€šæ°£</li>
                                <li>é€²é£ŸæœŸé–“å¯†åˆ‡ç›£æ¸¬è¡€æ°§é£½å’Œåº¦</li>
                                <li>è‹¥éœ€ç¹¼çºŒä½¿ç”¨BiPAPï¼Œè«‹é‡æ–°é–‹æ©Ÿå¾Œï¼Œå†æˆ´ä¸Šé¢ç½©</li>
                            </ul>
                        </div>
                        <p style="margin-top: 15px; color: #d32f2f; font-weight: 600; text-align: center;">
                            âš ï¸ é‡è¦æé†’ï¼šä½¿ç”¨BiPAPæœŸé–“è«‹è©•ä¼°æ˜¯å¦ç¦é£Ÿï¼Œä»¥æ¸›å°‘ç™¼ç”Ÿå¸å…¥æ€§è‚ºç‚çš„é¢¨éšª
                        </p>
                    </div>
                `
            },
            {
                scenario: "ä¸‹åˆ4é»äº¤ç­æ™‚é–“ï¼Œæ—©ç­è­·ç†å¸«å°ç‹æ­£åœ¨å‘æ™šç­è­·ç†å¸«å°æäº¤ç­ã€‚åºŠè™Ÿ15çš„åŠ‰å¥³å£«ï¼ˆ72æ­²ï¼‰æ­£åœ¨ä½¿ç”¨BiPAPï¼Œä½†æ©Ÿå™¨æŒçºŒç™¼å‡ºè­¦å ±è²ã€‚å°ææª¢æŸ¥ç™¼ç¾æ˜¯'å¤§é‡æ¼æ°£'è­¦å ±ã€‚",
                question: "é¢å°'å¤§é‡æ¼æ°£'è­¦å ±ï¼Œå°ææ‡‰å„ªå…ˆæ¡å–å“ªå€‹è™•ç†æ­¥é©Ÿï¼Ÿ",
                options: [
                    "ç«‹å³é—œæ©Ÿæª¢æŸ¥æ©Ÿå™¨æ˜¯å¦æ•…éšœ",
                    "å…ˆè©•ä¼°ç—…äººå‘¼å¸ç‹€æ³ï¼Œç„¶å¾Œé‡æ–°èª¿æ•´é¢ç½©ç¢ºä¿å¯†åˆ",
                    "èª¿é«˜BiPAPå£“åŠ›ä»¥è£œå„Ÿæ¼æ°£",
                    "æ›´æ›æ–°çš„é¢ç½©"
                ],
                correct: 1,
                feedback: {
                    correct: "å®Œå…¨æ­£ç¢ºï¼è™•ç†è­¦å ±æ™‚ï¼Œæ°¸é è¦å…ˆè©•ä¼°ç—…äººç‹€æ³ï¼Œç¢ºä¿å®‰å…¨ã€‚å¤§é‡æ¼æ°£é€šå¸¸æ˜¯é¢ç½©å¯†åˆåº¦å•é¡Œï¼Œé‡æ–°èª¿æ•´å³å¯è§£æ±ºã€‚",
                    incorrect: "è¨˜ä½ï¼Œä»»ä½•è­¦å ±è™•ç†éƒ½è¦å…ˆè©•ä¼°ç—…äººï¼å¤§é‡æ¼æ°£æœ€å¸¸è¦‹åŸå› æ˜¯é¢ç½©ç§»ä½ï¼Œæ‡‰å…ˆç¢ºèªç—…äººå®‰å…¨å¾Œé‡æ–°èª¿æ•´é¢ç½©ã€‚"
                },
                extraInfo: `
                    <div class="warning-section">
                        <h4 style="text-align: center; margin-bottom: 20px;">BiPAPå¸¸è¦‹è­¦å ±åŠè™•ç†åŸå‰‡</h4>
                        <div style="background: white; padding: 20px; border-radius: 10px;">
                            <table style="width: 100%; border-collapse: collapse;">
                                <tr style="background: #f5f5f5;">
                                    <th style="padding: 12px; text-align: left; border-bottom: 2px solid #ddd;">è­¦å ±é¡å‹</th>
                                    <th style="padding: 12px; text-align: left; border-bottom: 2px solid #ddd;">å¸¸è¦‹åŸå› </th>
                                    <th style="padding: 12px; text-align: left; border-bottom: 2px solid #ddd;">è™•ç†æ–¹å¼</th>
                                </tr>
                                <tr>
                                    <td style="padding: 12px; border-bottom: 1px solid #eee;"><strong>å¤§é‡æ¼æ°£</strong></td>
                                    <td style="padding: 12px; border-bottom: 1px solid #eee;">é¢ç½©é¬†è„«ã€é¼»èƒƒç®¡å½±éŸ¿å¯†åˆ</td>
                                    <td style="padding: 12px; border-bottom: 1px solid #eee;">é‡æ–°èª¿æ•´é¢ç½©ä½ç½®åŠé¬†ç·Šåº¦</td>
                                </tr>
                                <tr>
                                    <td style="padding: 12px; border-bottom: 1px solid #eee;"><strong>ç®¡è·¯è„«è½</strong></td>
                                    <td style="padding: 12px; border-bottom: 1px solid #eee;">ç®¡è·¯æœªæ¥å¥½ã€é¢ç½©å®Œå…¨è„«è½</td>
                                    <td style="padding: 12px; border-bottom: 1px solid #eee;">é‡æ–°é€£æ¥ç®¡è·¯æˆ–æˆ´å›é¢ç½©</td>
                                </tr>
                                <tr>
                                    <td style="padding: 12px; border-bottom: 1px solid #eee;"><strong>é«˜å£“è­¦å ±</strong></td>
                                    <td style="padding: 12px; border-bottom: 1px solid #eee;">ç—°æ¶²é˜»å¡ã€ç—…äººå°æŠ—å‘¼å¸å™¨</td>
                                    <td style="padding: 12px; border-bottom: 1px solid #eee;">è©•ä¼°æ˜¯å¦éœ€è¦æŠ½ç—°æˆ–èª¿æ•´è¨­å®š</td>
                                </tr>
                                <tr>
                                    <td style="padding: 12px;"><strong>ä½å£“è­¦å ±</strong></td>
                                    <td style="padding: 12px;">å¤§é‡æ¼æ°£ã€ç®¡è·¯ç ´æ</td>
                                    <td style="padding: 12px;">æª¢æŸ¥æ•´å€‹å‘¼å¸è¿´è·¯çš„å®Œæ•´æ€§</td>
                                </tr>
                            </table>
                            <div style="background: #fff3cd; padding: 15px; border-radius: 8px; margin-top: 20px;">
                                <strong>ğŸ”” è™•ç†è­¦å ±çš„é»ƒé‡‘åŸå‰‡ï¼š</strong>
                                <ol style="margin: 10px 0 0 20px;">
                                    <li>å…ˆè©•ä¼°ç—…äººç‹€æ³ï¼ˆå‘¼å¸ã€è¡€æ°§ã€æ„è­˜ï¼‰</li>
                                    <li>ä¾è­¦å ±é¡å‹é€²è¡Œç›¸æ‡‰è™•ç†</li>
                                    <li>è‹¥ç„¡æ³•æ’é™¤ï¼Œç«‹å³å°‹æ±‚æ”¯æ´</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                `
            },
            {
                scenario: "æ™šä¸Š8é»ï¼ŒåŠ‰å¥³å£«ï¼ˆ72æ­²ï¼‰æ™šé¤å¾Œè¦ç¹¼çºŒä½¿ç”¨BiPAPã€‚æ–°é€²è­·ç†å¸«å°é™³æº–å‚™æ“ä½œï¼Œä½†ä¸ç¢ºå®šæ­£ç¢ºé †åºã€‚è³‡æ·±è­·ç†å¸«å°ç¾åœ¨æ—æŒ‡å°ã€‚",
                question: "å°ç¾æ‡‰è©²æ•™å°å°é™³å“ªå€‹æ­£ç¢ºçš„æ“ä½œåŸå‰‡ï¼Ÿ",
                options: [
                    "æ°¸é è¨˜ä½ï¼šå…ˆé–‹æ©Ÿï¼Œå†æˆ´é¢ç½©ï¼›å…ˆè„«é¢ç½©ï¼Œå†é—œæ©Ÿ",
                    "é–‹é—œæ©Ÿé †åºä¸é‡è¦ï¼Œé‡é»æ˜¯é¢ç½©è¦æˆ´ç·Š",
                    "åªè¦ç—…äººèˆ’é©ï¼Œé †åºå¯ä»¥å½ˆæ€§èª¿æ•´",
                    "ç·Šæ€¥æ™‚å¯ä»¥åŒæ™‚é€²è¡Œé–‹æ©Ÿå’Œæˆ´é¢ç½©"
                ],
                correct: 0,
                feedback: {
                    correct: "éå¸¸å¥½ï¼é€™æ˜¯BiPAPæ“ä½œçš„é»ƒé‡‘åŸå‰‡ï¼Œå¿…é ˆåš´æ ¼éµå®ˆã€‚é€™å€‹é †åºç¢ºä¿ç—…äººå®‰å…¨ï¼Œé¿å…çª’æ¯é¢¨éšªã€‚",
                    incorrect: "å®‰å…¨åŸå‰‡ä¸å¯å¦¥å”ï¼å¿…é ˆéµå®ˆï¼šå…ˆé–‹æ©Ÿï¼Œå†æˆ´é¢ç½©ï¼›å…ˆè„«é¢ç½©ï¼Œå†é—œæ©Ÿã€‚é€™æ˜¯ä¿è­·ç—…äººå®‰å…¨çš„é—œéµã€‚"
                }
            },
            {
                scenario: "å‡Œæ™¨2é»ï¼Œå¼µå…ˆç”Ÿ(55æ­²ï¼Œæ€¥æ€§è‚ºæ°´è…«)çš„SpO2çªç„¶å¾95%é™åˆ°85%ï¼ŒBiPAPè­¦å ±éŸ¿èµ·ã€‚å€¼ç­è­·ç†å¸«å°é»ƒç™¼ç¾æ˜¯'ç®¡è·¯è„«è½'è­¦å ±ï¼Œæª¢æŸ¥å¾Œç™¼ç¾å‘¼å¸ç®¡è·¯ç¢ºå¯¦å¾æ©Ÿå™¨æ¥é ­è„«è½ã€‚",
                question: "å°é»ƒæ‡‰è©²æ¡å–ä»€éº¼ç·Šæ€¥è™•ç½®ï¼Ÿ",
                options: [
                    "å…ˆé—œæ©Ÿï¼Œé‡æ–°é€£æ¥ç®¡è·¯å¾Œå†é–‹æ©Ÿ",
                    "ä¿æŒé–‹æ©Ÿç‹€æ…‹ï¼Œç«‹å³é‡æ–°é€£æ¥ç®¡è·¯ï¼ŒåŒæ™‚ç›£æ¸¬ç—…äººè¡€æ°§è®ŠåŒ–",
                    "å…ˆå–ä¸‹ç—…äººé¢ç½©ï¼Œç­‰ç®¡è·¯æ¥å¥½å†é‡æ–°ä½¿ç”¨",
                    "å‘¼å«é†«å¸«å‰ä¾†è™•ç†"
                ],
                correct: 1,
                feedback: {
                    correct: "æ­£ç¢ºè™•ç†ï¼ä¿æŒé–‹æ©Ÿä¸¦ç«‹å³é‡æ–°é€£æ¥æ˜¯å°çš„ã€‚é€™æ¨£å¯ä»¥æœ€å¿«æ¢å¾©é€šæ°£æ”¯æŒï¼ŒåŒæ™‚è¦å¯†åˆ‡ç›£æ¸¬ç—…äººçš„è¡€æ°§è®ŠåŒ–ã€‚",
                    incorrect: "ç·Šæ€¥æƒ…æ³ä¸‹ï¼Œæ‡‰ä¿æŒBiPAPé–‹æ©Ÿï¼Œç«‹å³é‡æ–°é€£æ¥è„«è½çš„ç®¡è·¯ï¼Œé€™æ¨£èƒ½æœ€å¿«æ¢å¾©é€šæ°£ã€‚è¨˜å¾—åŒæ™‚ç›£æ¸¬è¡€æ°§ï¼"
                },
                extraInfo: `
                    <div class="intro-content" style="margin-bottom: 20px;">
                        <h3 style="text-align: center;">BiPAPåœ˜éšŠç…§è­·å®‰å…¨æ¨™ç¤ºç³»çµ±</h3>
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-top: 20px;">
                            <div style="background: #ffebee; padding: 20px; border-radius: 10px; text-align: center;">
                                <div style="font-size: 2em; margin-bottom: 10px;">ğŸ”Œ</div>
                                <h4 style="color: #c62828; margin-bottom: 10px;">å‘¼å¸å™¨æ’é ­æ¨™ç¤º</h4>
                                <ul style="text-align: left; font-size: 0.9em;">
                                    <li>æ’åœ¨ç´…è‰²æ’åº§</li>
                                    <li>è²¼ä¸Šã€Œè«‹å‹¿æ‹”é™¤ã€æ¨™ç±¤</li>
                                    <li>ç¢ºä¿é›»æºæŒ‡ç¤ºç‡ˆäº®èµ·</li>
                                </ul>
                            </div>
                            <div style="background: #e8f5e9; padding: 20px; border-radius: 10px; text-align: center;">
                                <div style="font-size: 2em; margin-bottom: 10px;">ğŸ”µ</div>
                                <h4 style="color: #2e7d32; margin-bottom: 10px;">æ°§æ°£æµé‡è¡¨æ¨™ç¤º</h4>
                                <ul style="text-align: left; font-size: 0.9em;">
                                    <li>æ›ä¸Šã€Œè«‹å‹¿é—œé–‰ã€å‘Šç¤ºç‰Œ</li>
                                    <li>ç¢ºèªæ°§æ°£é›™é ­ç®¡é€£æ¥</li>
                                    <li>æª¢æŸ¥æ°§æ°£æµé‡è¨­å®š</li>
                                </ul>
                            </div>
                            <div style="background: #e3f2fd; padding: 20px; border-radius: 10px; text-align: center;">
                                <div style="font-size: 2em; margin-bottom: 10px;">âš¡</div>
                                <h4 style="color: #1565c0; margin-bottom: 10px;">é–‹é—œæ©Ÿæ¨™ç¤º</h4>
                                <ul style="text-align: left; font-size: 0.9em;">
                                    <li>å…ˆé–‹æ©Ÿï¼Œå†æˆ´é¢ç½©</li>
                                    <li>å…ˆè„«é¢ç½©ï¼Œå†é—œæ©Ÿ</li>
                                    <li>å¼µè²¼æ–¼æ©Ÿå™¨æ˜é¡¯è™•</li>
                                </ul>
                            </div>
                        </div>
                        <div style="text-align: center; margin: 20px 0;">
                            <img src="niv2.jpg" alt="åœ˜éšŠç…§è­·æ¨™ç¤º" style="max-width: 100%; height: auto; border-radius: 10px; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);">
                        </div>
                        <div style="background: #fff9c4; padding: 15px; border-radius: 8px; margin-top: 20px;">
                            <strong>ğŸ’¡ åœ˜éšŠç…§è­·è¦é»ï¼š</strong>
                            <ul style="margin: 10px 0 0 20px;">
                                <li>æ‰€æœ‰åœ˜éšŠæˆå“¡éƒ½æ‡‰ç†Ÿæ‚‰é€™äº›æ¨™ç¤ºçš„æ„ç¾©</li>
                                <li>äº¤ç­æ™‚ç¢ºèªæ‰€æœ‰å®‰å…¨æ¨™ç¤ºéƒ½åœ¨æ­£ç¢ºä½ç½®</li>
                                <li>ç™¼ç¾æ¨™ç¤ºè„«è½æˆ–æ¨¡ç³Šæ‡‰ç«‹å³æ›´æ›</li>
                                <li>å®šæœŸé€²è¡Œåœ˜éšŠæ•™è‚²è¨“ç·´ï¼Œç¢ºä¿å…±è­˜</li>
                            </ul>
                        </div>
                    </div>
                `
            },
            {
                scenario: "æ—©ä¸Š9é»ï¼Œå‘¼å¸æ²»ç™‚å¸«å°é™³æ­£åœ¨ç‚ºæ–°é€²äººå“¡ç¤ºç¯„BiPAPå®‰å…¨æ“ä½œã€‚ä»–ç‰¹åˆ¥å¼·èª¿æŸäº›æƒ…æ³çµ•å°ç¦æ­¢å®¶å±¬è‡ªè¡Œæ“ä½œBiPAPé–‹é—œæ©Ÿã€‚æœ‰ä½å®¶å±¬å•ï¼š'å¦‚æœåŠå¤œç—…äººå¾ˆä¸èˆ’æœæƒ³è¦æš«æ™‚æ‹¿ä¸‹é¢ç½©ï¼Œæˆ‘å€‘å¯ä»¥å¹«å¿™å—ï¼Ÿ'",
                question: "å°é™³æ‡‰è©²å¦‚ä½•å›æ‡‰é€™å€‹å•é¡Œï¼Ÿ",
                options: [
                    "å¯ä»¥ï¼Œå®¶å±¬å¯ä»¥å”åŠ©æš«æ™‚å–ä¸‹é¢ç½©è®“ç—…äººä¼‘æ¯",
                    "åªè¦å®¶å±¬å­¸æœƒäº†å°±å¯ä»¥æ“ä½œ",
                    "ç·Šæ€¥æ™‚å®¶å±¬å¯ä»¥å…ˆè™•ç†ï¼Œå†é€šçŸ¥è­·ç†äººå“¡",
                    "çµ•å°ä¸è¡Œï¼ŒBiPAPçš„é–‹æ©Ÿã€é—œæ©ŸåŠé¢ç½©é…æˆ´æ“ä½œå¿…é ˆç”±é†«ç™‚äººå“¡åŸ·è¡Œ"
                ],
                correct: 3,
                feedback: {
                    correct: "å®Œå…¨æ­£ç¢ºï¼BiPAPçš„æ“ä½œå¿…é ˆç”±é†«ç™‚äººå“¡åŸ·è¡Œï¼Œé€™æ˜¯ç‚ºäº†ç¢ºä¿ç—…äººå®‰å…¨ã€‚å®¶å±¬æ‡‰è©²é€šçŸ¥é†«è­·äººå“¡ä¾†è™•ç†ã€‚",
                    incorrect: "è«‹è¨˜ä½ï¼Œç‚ºäº†ç—…äººå®‰å…¨ï¼ŒBiPAPçš„æ‰€æœ‰æ“ä½œï¼ˆé–‹é—œæ©Ÿã€é¢ç½©ç©¿è„«ï¼‰éƒ½å¿…é ˆç”±é†«ç™‚äººå“¡åŸ·è¡Œï¼Œå®¶å±¬ä¸å¯è‡ªè¡Œæ“ä½œã€‚"
                },
                extraInfo: `
                    <div class="intro-content" style="margin-bottom: 20px;">
                        <h3 style="text-align: center;">BiPAPç—…äººåŠç…§è­·è€…è¡›æ•™é‡é»</h3>
                        <div style="background: #f3e5f5; padding: 25px; border-radius: 10px;">
                            <h4 style="color: #6a1b9a; margin-bottom: 20px;">ğŸ¥ å¿…é ˆç”±é†«è­·äººå“¡åŸ·è¡Œçš„æ“ä½œ</h4>
                            <ul style="margin-bottom: 20px;">
                                <li><strong>é–‹æ©Ÿèˆ‡é—œæ©Ÿï¼š</strong>ç¢ºä¿æ­£ç¢ºçš„å•Ÿå‹•èˆ‡åœæ­¢ç¨‹åº</li>
                                <li><strong>é¢ç½©ç©¿è„«ï¼š</strong>éµå®ˆå…ˆé–‹æ©Ÿå†æˆ´ç½©ã€å…ˆè„«ç½©å†é—œæ©ŸåŸå‰‡</li>
                                <li><strong>åƒæ•¸èª¿æ•´ï¼š</strong>ä»»ä½•å£“åŠ›æˆ–æ°§æ°£æ¿ƒåº¦çš„æ”¹è®Š</li>
                                <li><strong>è­¦å ±è™•ç†ï¼š</strong>è©•ä¼°ä¸¦è§£æ±ºæ©Ÿå™¨è­¦å ±å•é¡Œ</li>
                            </ul>
                            
                            <h4 style="color: #6a1b9a; margin-bottom: 20px;">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ å®¶å±¬å¯å”åŠ©çš„äº‹é …</h4>
                            <ul style="margin-bottom: 20px;">
                                <li><strong>è§€å¯Ÿç—…äººç‹€æ³ï¼š</strong>å‘¼å¸æ˜¯å¦é †æš¢ã€æœ‰ç„¡ä¸é©è¡¨ç¾</li>
                                <li><strong>ä¿æŒç®¡è·¯é€šæš¢ï¼š</strong>é¿å…ç®¡è·¯æ‰­æ›²æˆ–å—å£“</li>
                                <li><strong>æé†’ä¸å¯æ‹”é™¤ï¼š</strong>ä¿è­·é›»æºç·šå’Œæ°§æ°£ç®¡è·¯</li>
                                <li><strong>åŠæ™‚é€šå ±ï¼š</strong>ç™¼ç¾ç•°å¸¸ç«‹å³é€šçŸ¥è­·ç†äººå“¡</li>
                            </ul>
                            
                            <h4 style="color: #6a1b9a; margin-bottom: 20px;">ğŸ“¢ é‡è¦æé†’äº‹é …</h4>
                            <div style="background: white; padding: 15px; border-radius: 8px;">
                                <ul>
                                    <li>ğŸ”´ <strong>ç´…è‰²æ’åº§ï¼š</strong>å‘¼å¸å™¨é›»æºå¿…é ˆæ’åœ¨ç´…è‰²ç·Šæ€¥é›»æºæ’åº§</li>
                                    <li>ğŸ’¨ <strong>æ°§æ°£é–‹é—œï¼š</strong>æ°§æ°£æµé‡è¡¨ä¸Šæœ‰ã€Œè«‹å‹¿é—œé–‰ã€æ¨™ç¤º</li>
                                    <li>ğŸš¨ <strong>è­¦å ±è²éŸ¿ï¼š</strong>è½åˆ°è­¦å ±ç«‹å³é€šçŸ¥è­·ç†äººå“¡</li>
                                    <li>ğŸ½ï¸ <strong>é£²é£Ÿé™åˆ¶ï¼š</strong>ä½¿ç”¨BiPAPæœŸé–“ç¦æ­¢é€²é£Ÿ</li>
                                    <li>ğŸ’§ <strong>çŸ­æš«é£²æ°´ï¼š</strong>å¯æš«æ™‚é¬†é–‹é¢ç½©å´é‚Šï¼Œä½†ä¸å¯åœæ©Ÿ</li>
                                </ul>
                            </div>
                            
                            <div style="background: #ffcdd2; padding: 15px; border-radius: 8px; margin-top: 20px;">
                                <strong>âš ï¸ ç‰¹åˆ¥æ³¨æ„ï¼š</strong>
                                <p style="margin-top: 10px;">å³ä½¿å®¶å±¬æ›¾æ¥å—éè¨“ç·´æˆ–åœ¨å®¶ä¸­æœ‰ä½¿ç”¨ç¶“é©—ï¼Œåœ¨é†«é™¢ç’°å¢ƒä¸­ä»é ˆç”±é†«è­·äººå“¡æ“ä½œï¼Œä»¥ç¢ºä¿ç¬¦åˆé†«é™¢æ„ŸæŸ“ç®¡åˆ¶åŠå®‰å…¨è¦ç¯„ã€‚</p>
                            </div>
                        </div>
                    </div>
                `
            }
        ];

        let currentQuestion = 0;
        let score = 0;
        let answered = false;
        let userAnswers = []; // å„²å­˜ä½¿ç”¨è€…çš„ç­”æ¡ˆ

        function showIntroduction() {
            document.getElementById('startScreen').style.display = 'none';
            document.getElementById('introductionSection').style.display = 'block';
        }

        function startQuiz() {
            document.getElementById('introductionSection').style.display = 'none';
            document.getElementById('questionContainer').style.display = 'block';
            showQuestion();
        }

        function showQuestion() {
            const question = questions[currentQuestion];
            document.getElementById('questionNumber').textContent = `ç¬¬ ${currentQuestion + 1} é¡Œ / å…± ${questions.length} é¡Œ`;
            document.getElementById('progressBar').style.width = `${((currentQuestion + 1) / questions.length) * 100}%`;

            // æ§åˆ¶ä¸Šä¸€é æŒ‰éˆ•é¡¯ç¤º
            if (
                (question.extraInfo && !window.showingOptions && currentQuestion === 0) // ç¬¬ä¸€é¡Œ extraInfo
            ) {
                document.getElementById('prevButton').style.display = 'none';
            } else {
                document.getElementById('prevButton').style.display = 'inline-block';
            }

            // å¦‚æœæœ‰ extraInfo ä¸”é‚„æ²’é€²å…¥ä½œç­”éšæ®µ
            if (question.extraInfo && !window.showingOptions) {
                document.getElementById('scenario').innerHTML = question.extraInfo +
                    `<div style="text-align:center;margin-top:20px;">
                        <button class="start-button" onclick="showOptions()">é–‹å§‹ä½œç­”</button>
                    </div>`;
                document.getElementById('options').innerHTML = '';
                document.getElementById('feedback').style.display = 'none';
                document.getElementById('nextButton').style.display = 'none';
                document.getElementById('prevButton').style.display = currentQuestion === 0 ? 'none' : 'inline-block';
                return;
            }
            window.showingOptions = false;

            let scenarioContent = '';
            
            // å¦‚æœæœ‰é¡å¤–è³‡è¨Šï¼Œå…ˆé¡¯ç¤º
            if (question.extraInfo) {
                scenarioContent = question.extraInfo;
            }
            
            scenarioContent += `
    <div class="scenario-content">
        <h3>è‡¨åºŠæƒ…å¢ƒ</h3>
        <p>${question.scenario}</p>
        <p><strong>${question.question}</strong></p>
    </div>
`;
            
            document.getElementById('scenario').innerHTML = scenarioContent;
            
            const optionsHtml = question.options.map((option, index) => `
                <div class="option" onclick="selectAnswer(${index})" id="option-${index}">
                    ${String.fromCharCode(65 + index)}. ${option}
                </div>
            `).join('');
            
            document.getElementById('options').innerHTML = optionsHtml;
            
            // æª¢æŸ¥æ˜¯å¦å·²ç¶“å›ç­”éé€™é¡Œ
            if (userAnswers[currentQuestion] !== undefined) {
                showPreviousAnswer();
            } else {
                document.getElementById('feedback').style.display = 'none';
                answered = false;
            }
            
            // æœ€å¾Œä¸€é¡Œæ™‚ä¿®æ”¹æŒ‰éˆ•æ–‡å­—
            if (currentQuestion === questions.length - 1) {
                document.getElementById('nextButton').textContent = 'æˆ‘è¦çœ‹åˆ†æ•¸';
            } else {
                document.getElementById('nextButton').textContent = 'ä¸‹ä¸€é¡Œ';
            }
            
            // å¦‚æœå·²ç­”éï¼Œé¡¯ç¤ºä¸‹ä¸€é¡ŒæŒ‰éˆ•
            if (userAnswers[currentQuestion] !== undefined) {
                document.getElementById('nextButton').style.display = 'inline-block';
            } else {
                document.getElementById('nextButton').style.display = 'none';
            }
        }

        function showPreviousAnswer() {
            const question = questions[currentQuestion];
            const previousAnswer = userAnswers[currentQuestion];
            const options = document.querySelectorAll('.option');
            
            // é¡¯ç¤ºä¹‹å‰çš„ç­”æ¡ˆ
            options[previousAnswer].classList.add('selected');
            
            if (previousAnswer === question.correct) {
                options[previousAnswer].classList.add('correct');
            } else {
                options[previousAnswer].classList.add('incorrect');
                options[question.correct].classList.add('correct');
            }
            
            // é¡¯ç¤ºå›é¥‹
            const isCorrect = previousAnswer === question.correct;
            showFeedback(isCorrect, question.feedback[isCorrect ? 'correct' : 'incorrect'], false);
            
            // ç¦ç”¨é¸é …
            options.forEach(option => {
                option.style.cursor = 'default';
                option.onclick = null;
            });
            
            answered = true;
        }

        function selectAnswer(index) {
            if (answered) return;
            
            answered = true;
            userAnswers[currentQuestion] = index; // å„²å­˜ç­”æ¡ˆ
            
            const question = questions[currentQuestion];
            const options = document.querySelectorAll('.option');
            
            options[index].classList.add('selected');
            
            if (index === question.correct) {
                options[index].classList.add('correct');
                // åªæœ‰ç¬¬ä¸€æ¬¡ç­”å°æ‰è¨ˆåˆ†
                if (!userAnswers[currentQuestion + '_scored']) {
                    score++;
                    userAnswers[currentQuestion + '_scored'] = true;
                }
                showFeedback(true, question.feedback.correct, true);
            } else {
                options[index].classList.add('incorrect');
                options[question.correct].classList.add('correct');
                showFeedback(false, question.feedback.incorrect, true);
            }
            
            document.getElementById('scoreDisplay').textContent = `å¾—åˆ†: ${score}`;
            document.getElementById('nextButton').style.display = 'inline-block';
            
            // Disable all options
            options.forEach(option => {
                option.style.cursor = 'default';
                option.onclick = null;
            });
        }

        function showFeedback(isCorrect, message, showKeyPoint = true) {
            const feedback = document.getElementById('feedback');
            feedback.className = `feedback ${isCorrect ? 'correct' : 'incorrect'}`;
            
            // åªåœ¨ç‰¹å®šé¡Œç›®é¡¯ç¤ºé—œéµæé†’
            const showReminder = !isCorrect && showKeyPoint && 
                (currentQuestion === 0 || currentQuestion === 3 || currentQuestion === 5);

            feedback.innerHTML = `
                <h4>${isCorrect ? 'âœ“ ç­”å°äº†ï¼' : 'âœ— ç­”éŒ¯äº†'}</h4>
                <p>${message}</p>
                ${showReminder ? '<div class="key-point">è¨˜ä½ï¼šå…ˆé–‹æ©Ÿï¼Œå†æˆ´é¢ç½©ï¼›å…ˆè„«é¢ç½©ï¼Œå†é—œæ©Ÿã€‚<br>âš ï¸ ç¢ºä¿ç—…äººä½¿ç”¨æ™‚æœ‰é€šæ°£</div>' : ''}
            `;
            feedback.style.display = 'block';
        }

        function nextQuestion() {
            currentQuestion++;
            if (currentQuestion < questions.length) {
                // å¦‚æœä¸‹ä¸€é¡Œå·²ä½œç­”ï¼Œç›´æ¥é¡¯ç¤ºä½œç­”çµæœ
                if (userAnswers[currentQuestion] !== undefined) {
                    window.showingOptions = true;
                } else {
                    window.showingOptions = false;
                }
                showQuestion();
            } else {
                showResults();
            }
        }

        function prevPage() {
            const question = questions[currentQuestion];
            // å¦‚æœç›®å‰åœ¨ extraInfo é ï¼Œå›åˆ°ä¸Šä¸€é¡Œï¼ˆä½œç­”é æˆ– extraInfoï¼‰
            if (question.extraInfo && !window.showingOptions) {
                if (currentQuestion === 0) {
                    // ç¬¬ä¸€é¡Œ extraInfoï¼Œå›é¦–é ï¼ˆå‰è¨€ï¼‰
                    document.getElementById('questionContainer').style.display = 'none';
                    document.getElementById('introductionSection').style.display = 'block';
                } else {
                    // å›ä¸Šä¸€é¡Œçš„ä½œç­”é æˆ– extraInfo
                    currentQuestion--;
                    // å¦‚æœä¸Šä¸€é¡Œå·²ä½œç­”ï¼Œç›´æ¥é¡¯ç¤ºä½œç­”çµæœ
                    if (userAnswers[currentQuestion] !== undefined) {
                        window.showingOptions = true;
                    } else {
                        window.showingOptions = false;
                    }
                    showQuestion();
                }
            } else if (question.extraInfo && window.showingOptions) {
                // ç›®å‰åœ¨ä½œç­”é ï¼Œå›æœ¬é¡Œ extraInfo
                window.showingOptions = false;
                showQuestion();
            } else {
                // æ²’æœ‰ extraInfo
                if (currentQuestion === 0) {
                    // ç¬¬ä¸€é¡Œç›´æ¥å›å‰è¨€
                    document.getElementById('questionContainer').style.display = 'none';
                    document.getElementById('introductionSection').style.display = 'block';
                } else {
                    // å…¶ä»–é¡Œå›ä¸Šä¸€é¡Œ
                    currentQuestion--;
                    // å¦‚æœä¸Šä¸€é¡Œå·²ä½œç­”ï¼Œç›´æ¥é¡¯ç¤ºä½œç­”çµæœ
                    if (userAnswers[currentQuestion] !== undefined) {
                        window.showingOptions = true;
                    } else {
                        window.showingOptions = false;
                    }
                    showQuestion();
                }
            }
        }

        function showResults() {
            document.getElementById('questionContainer').style.display = 'none';
            document.getElementById('results').style.display = 'block';
            
            const percentage = Math.round((score / questions.length) * 100);
            document.getElementById('finalScore').textContent = `${score} / ${questions.length}`;
            
            let message = '';
            if (percentage === 100) {
                message = 'å¤ªæ£’äº†ï¼æ‚¨å·²å®Œå…¨æŒæ¡BiPAPå®‰å…¨æ“ä½œåŸå‰‡ï¼';
            } else if (percentage >= 80) {
                message = 'è¡¨ç¾å„ªç§€ï¼æ‚¨å°BiPAPå®‰å…¨æ“ä½œæœ‰è‰¯å¥½çš„ç†è§£ã€‚';
            } else if (percentage >= 70) {
                message = 'é€šéæ¸¬é©—ï¼æ‚¨å°BiPAPå®‰å…¨æ“ä½œæœ‰åŸºæœ¬çš„ç†è§£ã€‚';
            } else {
                message = 'æœªåˆæ ¼ï¼Œè«‹é‡æ–°å­¸ç¿’ï¼';
            }
            
            document.getElementById('performanceMessage').textContent = message;
            
            // åªæœ‰70åˆ†ä»¥ä¸Šæ‰é¡¯ç¤ºäººäº‹è™Ÿè¼¸å…¥è¡¨å–®
            if (percentage >= 70) {
                document.getElementById('completionForm').style.display = 'block';
            } else {
                document.getElementById('completionForm').style.display = 'none';
            }
        }

        function submitCompletion() {
    const staffId = document.getElementById('staffId').value.trim();

    // é©—è­‰äººäº‹è™Ÿç¢¼æ ¼å¼
    if (!/^[A-Za-z0-9]{6}$/.test(staffId)) {
        alert('äººäº‹è™Ÿç¢¼å¿…é ˆç‚º6å€‹è‹±æ–‡å­—æ¯æˆ–æ•¸å­—');
        return;
    }

    // å–å¾—ç•¶å‰å®Œæˆæ™‚é–“
    const now = new Date();
    const completionTime = now.toLocaleString('zh-TW', { 
        year: 'numeric', 
        month: '2-digit', 
        day: '2-digit', 
        hour: '2-digit', 
        minute: '2-digit' 
    });

    // å®‰å…¨å–å¾— score å’Œ questions
    const totalQuestions = questions.length;
    const percentage = totalQuestions > 0 ? Math.round((score / totalQuestions) * 100) : 0;

    // æº–å‚™ URL encoded æ ¼å¼è³‡æ–™
    const formData = new URLSearchParams();
    formData.append('staffId', staffId);
    formData.append('score', score);
    formData.append('totalQuestions', totalQuestions);
    formData.append('percentage', percentage);
    formData.append('completionTime', completionTime);

    // é¡¯ç¤ºå®Œæˆè¨Šæ¯ï¼ˆå…ˆéš±è—è¡¨å–®ï¼‰
    document.getElementById('completionForm').style.display = 'none';
    document.getElementById('completionMessage').style.display = 'block';

    // ç™¼é€åˆ° Google Apps Script Webhook
    fetch('https://script.google.com/macros/s/AKfycbykK-7AVJr3UXOQn79uAezFP4PwFPdigQRWrRrkWBYsVM7wCnELyLGcRORSLL4UBxKw/exec', {
        method: 'POST',
        body: formData
    })
    .then(response => response.text())
    .then(data => {
        console.log('å›å‚³å…§å®¹:', data);
        if (data.toLowerCase().includes('success') || data.toLowerCase().includes('ok')) {
            document.getElementById('completionMessage').innerHTML += '<br>âœ… å­¸ç¿’ç´€éŒ„å·²æˆåŠŸå„²å­˜ï¼';
        } else {
            document.getElementById('completionMessage').innerHTML += '<br>âŒ å„²å­˜å¤±æ•—ï¼Œè«‹è¯ç¹«ç®¡ç†å“¡ã€‚';
            document.getElementById('completionForm').style.display = 'block';
        }
    })
    .catch(error => {
        console.error('å„²å­˜ç´€éŒ„æ™‚ç™¼ç”ŸéŒ¯èª¤ï¼š', error);
        document.getElementById('completionMessage').innerHTML += '<br>âŒ å„²å­˜å¤±æ•—ï¼Œè«‹æª¢æŸ¥ç¶²è·¯æˆ–è¯ç¹«ç®¡ç†å“¡ã€‚<br>è«‹å†è©¦ä¸€æ¬¡ã€‚';
        document.getElementById('completionForm').style.display = 'block';
    });
}
        function restartQuiz() {
            currentQuestion = 0;
            score = 0;
            answered = false;
            userAnswers = []; // é‡ç½®ç­”æ¡ˆè¨˜éŒ„
            
            document.getElementById('results').style.display = 'none';
            document.getElementById('startScreen').style.display = 'block';
            document.getElementById('scoreDisplay').textContent = 'å¾—åˆ†: 0';
            
            // é‡ç½®è¡¨å–®
            document.getElementById('staffId').value = '';
            document.getElementById('completionForm').style.display = 'block';
            document.getElementById('completionMessage').style.display = 'none';
        }

        function showOptions() {
            window.showingOptions = true;
            showQuestion();
        }

        // é¡¯ç¤ºæœ€å¾Œæ›´æ–°æ—¥æœŸï¼ˆå›ºå®šç‚º 2025.7.10ï¼‰
document.getElementById('lastUpdated').textContent =
    'æœ€å¾Œæ›´æ–°æ—¥æœŸï¼š2025.7.10 (Ver 1.5)';
    </script>
</body>
</html>
